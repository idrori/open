<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SPARC NREF Amplitude Investigation</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7"></script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #0a0e1a; color: #e0e0e0; }
.header { background: linear-gradient(135deg, #1a237e, #0d47a1); padding: 30px; text-align: center; }
.header h1 { font-size: 1.8em; color: #fff; margin-bottom: 8px; }
.header p { color: #90caf9; font-size: 0.95em; }
.container { max-width: 1200px; margin: 0 auto; padding: 20px; }
.grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; }
.card { background: #1a1f2e; border-radius: 12px; padding: 20px; border: 1px solid #2a3040; }
.card h3 { color: #64b5f6; margin-bottom: 15px; font-size: 1.1em; }
.full-width { grid-column: 1 / -1; }
.stats-row { display: flex; justify-content: space-around; flex-wrap: wrap; gap: 15px; margin: 20px 0; }
.stat-box { background: #1a1f2e; border-radius: 10px; padding: 20px 30px; text-align: center; border: 1px solid #2a3040; min-width: 180px; }
.stat-box .value { font-size: 1.8em; font-weight: bold; color: #64b5f6; }
.stat-box .label { font-size: 0.85em; color: #90a4ae; margin-top: 5px; }
canvas { max-height: 350px; }
.controls { margin-bottom: 20px; }
.controls label { margin-right: 10px; color: #90a4ae; }
.controls select, .controls input[type=range] { padding: 5px; background: #2a3040; color: #e0e0e0; border: 1px solid #3a4050; border-radius: 5px; }
table { width: 100%; border-collapse: collapse; margin-top: 10px; }
th, td { padding: 10px 12px; text-align: center; border-bottom: 1px solid #2a3040; }
th { color: #64b5f6; font-weight: 600; }
td { color: #cfd8dc; }
</style>
</head>
<body>
<div class="header">
<h1>Intrinsic Non-Resonant Error Field Amplitude in SPARC</h1>
<p>Computational Investigation of NTV Torque and Rotation Braking | Logan et al., arXiv:2601.12469</p>
</div>
<div class="container">
<div class="stats-row">
<div class="stat-box"><div class="value">12.2 T</div><div class="label">Toroidal Field B0</div></div>
<div class="stat-box"><div class="value">431.80</div><div class="label">Central Rotation (rad/s)</div></div>
<div class="stat-box"><div class="value">0.984</div><div class="label">Rotation Reduction Factor</div></div>
<div class="stat-box"><div class="value">1.69e-4</div><div class="label">Max Correctable EF (B/B0)</div></div>
<div class="stat-box"><div class="value">0.019</div><div class="label">Rotation Margin</div></div>
</div>
<div class="grid">
<div class="card full-width">
<h3>Rotation Profile vs NREF Amplitude</h3>
<canvas id="rotationChart"></canvas>
</div>
<div class="card">
<h3>Rotation Margin vs NREF Amplitude</h3>
<canvas id="marginChart"></canvas>
</div>
<div class="card">
<h3>NTV Torque Peak vs NREF</h3>
<canvas id="ntvChart"></canvas>
</div>
<div class="card">
<h3>Collisionality Dependence</h3>
<canvas id="collChart"></canvas>
</div>
<div class="card">
<h3>Key Parameters</h3>
<table>
<tr><th>Parameter</th><th>Value</th></tr>
<tr><td>Major radius R0</td><td>1.85 m</td></tr>
<tr><td>Minor radius a</td><td>0.57 m</td></tr>
<tr><td>Plasma current Ip</td><td>8.7 MA</td></tr>
<tr><td>q95</td><td>3.4</td></tr>
<tr><td>Central ne</td><td>3.1e20 m^-3</td></tr>
<tr><td>Central Te</td><td>21.0 keV</td></tr>
<tr><td>NBI Power</td><td>25 MW</td></tr>
<tr><td>NREF scan range</td><td>1e-5 to 1e-3</td></tr>
</table>
</div>
</div>
</div>
<script>
const nrefAmps = [1e-5, 1.17e-5, 1.37e-5, 1.61e-5, 1.89e-5, 2.21e-5, 2.59e-5, 3.04e-5, 3.56e-5, 4.18e-5, 4.89e-5, 5.74e-5, 6.72e-5, 7.88e-5, 9.24e-5, 1.08e-4, 1.27e-4, 1.49e-4, 1.74e-4, 2.04e-4, 2.40e-4, 2.81e-4, 3.29e-4, 3.86e-4, 4.52e-4, 5.30e-4, 6.21e-4, 7.28e-4, 8.53e-4, 1.00e-3];
const centralRot = [431.80, 431.80, 431.80, 431.80, 431.80, 431.80, 431.80, 431.79, 431.79, 431.79, 431.79, 431.78, 431.78, 431.77, 431.76, 431.74, 431.72, 431.68, 431.62, 431.53, 431.39, 431.17, 430.82, 430.28, 429.41, 428.25, 426.86, 426.86, 426.86, 424.87];
const margins = [0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019];
const ntvPeak = [31.74, 31.74, 31.74, 31.74, 31.74, 31.74, 31.74, 31.74, 31.74, 31.74, 31.74, 31.74, 31.74, 31.74, 31.74, 31.74, 31.74, 31.74, 31.74, 31.74, 31.74, 31.75, 31.75, 31.75, 31.76, 31.76, 31.76, 31.76, 31.77, 31.77];
const nuMult = [0.1, 0.15, 0.22, 0.33, 0.49, 0.73, 1.08, 1.60, 2.37, 3.51, 5.18, 7.67, 10.0];
const collMargin = [0.019, 0.024, 0.030, 0.037, 0.044, 0.051, 0.058, 0.065, 0.072, 0.078, 0.084, 0.088, 0.091];

const nrefLabels = nrefAmps.map(v => v.toExponential(1));

new Chart(document.getElementById('rotationChart'), {
  type: 'line',
  data: { labels: nrefLabels, datasets: [{ label: 'Central Rotation (rad/s)', data: centralRot, borderColor: '#42a5f5', backgroundColor: 'rgba(66,165,245,0.1)', fill: true, tension: 0.3, pointRadius: 2 }] },
  options: { responsive: true, plugins: { legend: { labels: { color: '#cfd8dc' } } }, scales: { x: { title: { display: true, text: 'NREF Amplitude (|dB/B0|)', color: '#90a4ae' }, ticks: { color: '#90a4ae', maxRotation: 45 } }, y: { title: { display: true, text: 'omega_phi (rad/s)', color: '#90a4ae' }, ticks: { color: '#90a4ae' } } } }
});

new Chart(document.getElementById('marginChart'), {
  type: 'line',
  data: { labels: nrefLabels, datasets: [{ label: 'Rotation Margin', data: margins, borderColor: '#ef5350', backgroundColor: 'rgba(239,83,80,0.1)', fill: true, tension: 0.3, pointRadius: 2 }, { label: 'Locking Threshold', data: Array(30).fill(1.0), borderColor: '#ff9800', borderDash: [5,5], pointRadius: 0 }] },
  options: { responsive: true, plugins: { legend: { labels: { color: '#cfd8dc' } } }, scales: { x: { ticks: { color: '#90a4ae', maxRotation: 45 } }, y: { title: { display: true, text: 'Margin', color: '#90a4ae' }, ticks: { color: '#90a4ae' } } } }
});

new Chart(document.getElementById('ntvChart'), {
  type: 'line',
  data: { labels: nrefLabels, datasets: [{ label: 'NTV Peak (N/m2)', data: ntvPeak, borderColor: '#66bb6a', backgroundColor: 'rgba(102,187,106,0.1)', fill: true, tension: 0.3, pointRadius: 2 }] },
  options: { responsive: true, plugins: { legend: { labels: { color: '#cfd8dc' } } }, scales: { x: { ticks: { color: '#90a4ae', maxRotation: 45 } }, y: { title: { display: true, text: 'T_NTV Peak (N/m2)', color: '#90a4ae' }, ticks: { color: '#90a4ae' } } } }
});

new Chart(document.getElementById('collChart'), {
  type: 'line',
  data: { labels: nuMult.map(v => v.toFixed(2)), datasets: [{ label: 'Rotation Margin', data: collMargin, borderColor: '#ab47bc', backgroundColor: 'rgba(171,71,188,0.1)', fill: true, tension: 0.3, pointRadius: 3 }] },
  options: { responsive: true, plugins: { legend: { labels: { color: '#cfd8dc' } } }, scales: { x: { title: { display: true, text: 'Collisionality Multiplier', color: '#90a4ae' }, ticks: { color: '#90a4ae' } }, y: { title: { display: true, text: 'Margin', color: '#90a4ae' }, ticks: { color: '#90a4ae' } } } }
});
</script>
</body>
</html>
