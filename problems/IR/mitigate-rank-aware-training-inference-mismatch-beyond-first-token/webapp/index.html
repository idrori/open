<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rank-Aware Training-Inference Mismatch</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
<style>
:root{--primary:#1a3a5c;--accent:#2980b9;--bg:#f5f7fa;--card-bg:#fff;--text:#1a1a2e;--text-muted:#5a6270;--border:#e2e6ea;}
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Georgia',serif;background:var(--bg);color:var(--text);line-height:1.7;}
.container{max-width:1100px;margin:0 auto;padding:0 24px;}
header{background:linear-gradient(135deg,var(--primary),#16213e,#0f3460);color:#fff;padding:60px 0 50px;text-align:center;}
header h1{font-size:1.8rem;font-weight:700;margin-bottom:16px;}
header .subtitle{font-size:1.05rem;color:#b0c4de;max-width:700px;margin:0 auto 24px;font-style:italic;}
section{padding:48px 0;}
.card{background:var(--card-bg);border-radius:12px;padding:28px;margin-bottom:24px;box-shadow:0 2px 8px rgba(0,0,0,0.06);}
.card h2{font-size:1.4rem;color:var(--primary);margin-bottom:16px;}
.chart-container{position:relative;height:400px;margin:20px 0;}
.grid-2{display:grid;grid-template-columns:repeat(auto-fit,minmax(480px,1fr));gap:24px;}
.metric-cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin:20px 0;}
.metric-card{background:#f8f9fb;border-radius:8px;padding:16px;text-align:center;}
.metric-card .value{font-size:1.8rem;font-weight:700;color:var(--accent);}
.metric-card .label{font-size:0.85rem;color:var(--text-muted);margin-top:4px;}
table{width:100%;border-collapse:collapse;margin:16px 0;font-size:0.9rem;}
th,td{padding:10px 14px;text-align:left;border-bottom:1px solid var(--border);}
th{background:#f0f4f8;font-weight:600;color:var(--primary);}
footer{background:var(--primary);color:#8faec8;padding:30px 0;text-align:center;font-size:0.85rem;}
</style>
</head>
<body>
<header><div class="container">
  <h1>Mitigating Rank-Aware Training-Inference Mismatch</h1>
  <p class="subtitle">Comparing scheduled sampling and consistency regularization for autoregressive ranking beyond the first token</p>
</div></header>
<div class="container">
<section>
<div class="card">
  <h2>Key Findings</h2>
  <div class="metric-cards">
    <div class="metric-card"><div class="value">+26.3%</div><div class="label">Consistency Reg. vs Baseline</div></div>
    <div class="metric-card"><div class="value">0.0691</div><div class="label">Best AR Quality (Consist.)</div></div>
    <div class="metric-card"><div class="value">0.0286</div><div class="label">KL at t=1 (all methods)</div></div>
    <div class="metric-card"><div class="value">200</div><div class="label">Monte Carlo Simulations</div></div>
  </div>
</div>
</section>
<section>
<div class="grid-2">
<div class="card">
  <h2>Autoregressive Quality</h2>
  <div class="chart-container"><canvas id="qualityChart"></canvas></div>
</div>
<div class="card">
  <h2>Training-Inference Mismatch</h2>
  <div class="chart-container"><canvas id="mismatchChart"></canvas></div>
</div>
</div>
</section>
<section>
<div class="card">
  <h2>Position-Level KL Divergence</h2>
  <div class="chart-container"><canvas id="positionChart"></canvas></div>
</div>
</section>
<section>
<div class="card">
  <h2>Results Table</h2>
  <table>
    <tr><th>Method</th><th>AR Quality</th><th>TF Quality</th><th>Mismatch</th><th>KL at t=1</th></tr>
    <tr><td>Teacher Forcing</td><td>0.0547</td><td>0.0623</td><td>-0.0278</td><td>0.0286</td></tr>
    <tr><td>Scheduled Sampling</td><td>0.0539</td><td>0.0609</td><td>-0.0285</td><td>0.0286</td></tr>
    <tr><td>Consistency Reg.</td><td>0.0691</td><td>0.0620</td><td>-0.0287</td><td>0.0286</td></tr>
  </table>
</div>
</section>
</div>
<footer><div class="container">Rank-Aware Mismatch Mitigation - Open Problem from Rozonoyer et al. (2026)</div></footer>
<script>
const M=['Teacher Forcing','Scheduled Sampling','Consistency Reg.'];
const C=['#e74c3c','#2980b9','#27ae60'];
new Chart(document.getElementById('qualityChart').getContext('2d'),{
  type:'bar',
  data:{labels:M,datasets:[
    {label:'AR Quality',data:[0.0547,0.0539,0.0691],backgroundColor:C.map(c=>c+'cc'),borderRadius:4},
    {label:'TF Quality',data:[0.0623,0.0609,0.0620],backgroundColor:C.map(c=>c+'66'),borderRadius:4}
  ]},
  options:{responsive:true,maintainAspectRatio:false,scales:{y:{title:{display:true,text:'Quality'}}}}
});
new Chart(document.getElementById('mismatchChart').getContext('2d'),{
  type:'bar',
  data:{labels:M,datasets:[{data:[-0.0278,-0.0285,-0.0287],backgroundColor:C,borderRadius:4}]},
  options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},
    scales:{y:{title:{display:true,text:'KL Mismatch'}}}}
});
const pos=['t=1','t=2','t=3','t=4','t=5','t=6'];
const klData={
  tf:[0.029,0.038,0.008,0.004,0.006,0.008],
  ss:[0.029,0.038,0.008,0.005,0.007,0.007],
  cr:[0.029,0.038,0.008,0.004,0.006,0.007]
};
new Chart(document.getElementById('positionChart').getContext('2d'),{
  type:'line',
  data:{labels:pos,datasets:[
    {label:'Teacher Forcing',data:klData.tf,borderColor:'#e74c3c',tension:0.3,pointRadius:5},
    {label:'Scheduled Sampling',data:klData.ss,borderColor:'#2980b9',tension:0.3,pointRadius:5},
    {label:'Consistency Reg.',data:klData.cr,borderColor:'#27ae60',tension:0.3,pointRadius:5}
  ]},
  options:{responsive:true,maintainAspectRatio:false,
    scales:{x:{title:{display:true,text:'Token Position'}},y:{title:{display:true,text:'KL Divergence'}}}}
});
</script>
</body>
</html>
