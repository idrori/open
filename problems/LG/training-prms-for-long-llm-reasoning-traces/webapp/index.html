<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Training PRMs for Long LLM Reasoning Traces</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
<style>
  :root { --primary: #1a3a5c; --accent: #2980b9; }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'Segoe UI', system-ui, sans-serif; background: #f4f7fa; color: #333; }
  .header { background: var(--primary); color: #fff; padding: 2rem; text-align: center; }
  .header h1 { font-size: 1.6rem; margin-bottom: 0.5rem; }
  .header p { font-size: 0.95rem; opacity: 0.85; max-width: 800px; margin: 0 auto; }
  .container { max-width: 1200px; margin: 0 auto; padding: 1.5rem; }
  .tabs { display: flex; gap: 0.5rem; margin-bottom: 1.5rem; flex-wrap: wrap; }
  .tab { padding: 0.6rem 1.2rem; background: #fff; border: 2px solid #ddd; border-radius: 6px; cursor: pointer; font-weight: 500; transition: all 0.2s; }
  .tab:hover { border-color: var(--accent); }
  .tab.active { background: var(--accent); color: #fff; border-color: var(--accent); }
  .panel { display: none; }
  .panel.active { display: block; }
  .chart-card { background: #fff; border-radius: 10px; padding: 1.5rem; margin-bottom: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
  .chart-card h3 { color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem; }
  .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(500px, 1fr)); gap: 1.5rem; }
  .chart-container { position: relative; height: 350px; }
  table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
  th, td { padding: 0.7rem 1rem; text-align: left; border-bottom: 1px solid #e0e0e0; }
  th { background: var(--primary); color: #fff; font-weight: 500; }
  tr:hover { background: #f0f4f8; }
  .highlight { color: var(--accent); font-weight: 700; }
  .insight { background: #e8f4fd; border-left: 4px solid var(--accent); padding: 1rem 1.2rem; border-radius: 0 6px 6px 0; margin: 1rem 0; }
  .footer { text-align: center; padding: 2rem; color: #888; font-size: 0.85rem; }
</style>
</head>
<body>

<div class="header">
  <h1>Training Process Reward Models for Long LLM Reasoning Traces</h1>
  <p>Comparing Monte-Carlo, TD(lambda), Contrastive, and Intervention-based PRM training methodologies across trace lengths, reward sparsity levels, and random seeds.</p>
</div>

<div class="container">
  <div class="tabs">
    <div class="tab active" onclick="showPanel('overview')">Overview</div>
    <div class="tab" onclick="showPanel('traces')">Trace Length</div>
    <div class="tab" onclick="showPanel('sparsity')">Reward Sparsity</div>
    <div class="tab" onclick="showPanel('convergence')">Convergence</div>
    <div class="tab" onclick="showPanel('multiseed')">Multi-Seed</div>
  </div>

  <div id="overview" class="panel active">
    <div class="chart-card">
      <h3>Method Comparison (T=16, Moderate Sparsity)</h3>
      <table>
        <thead><tr><th>Method</th><th>MSE</th><th>Correlation</th><th>Ranking Accuracy</th></tr></thead>
        <tbody>
          <tr><td>Monte-Carlo</td><td class="highlight">0.257</td><td class="highlight">0.996</td><td class="highlight">0.942</td></tr>
          <tr><td>Contrastive</td><td>1.139</td><td>0.910</td><td>0.825</td></tr>
          <tr><td>Intervention</td><td>1.064</td><td>0.768</td><td>0.852</td></tr>
          <tr><td>TD(lambda)</td><td>1.197</td><td>0.207</td><td>0.572</td></tr>
        </tbody>
      </table>
      <div class="insight">Monte-Carlo training achieves near-perfect credit assignment correlation (0.996), while TD(lambda) struggles significantly with only 0.207 correlation. Contrastive and intervention methods offer a middle ground with good ranking accuracy.</div>
    </div>
    <div class="chart-card">
      <h3>Final Metrics Comparison</h3>
      <div class="chart-container"><canvas id="overviewChart"></canvas></div>
    </div>
  </div>

  <div id="traces" class="panel">
    <div class="chart-card">
      <h3>Credit Assignment Correlation vs. Trace Length</h3>
      <div class="chart-container"><canvas id="traceLenCorr"></canvas></div>
    </div>
    <div class="chart-card">
      <h3>Ranking Accuracy vs. Trace Length</h3>
      <div class="chart-container"><canvas id="traceLenRank"></canvas></div>
    </div>
    <div class="insight">Monte-Carlo maintains stable correlation (>0.99) across all trace lengths. Contrastive degrades from 0.93 to 0.56, and intervention from 0.92 to 0.29 at T=64. TD(lambda) approaches zero correlation at T=64.</div>
  </div>

  <div id="sparsity" class="panel">
    <div class="chart-card">
      <h3>Ranking Accuracy Across Reward Sparsity Levels</h3>
      <div class="chart-container"><canvas id="sparsityChart"></canvas></div>
    </div>
    <div class="chart-card">
      <h3>Correlation Across Sparsity Levels</h3>
      <div class="chart-container"><canvas id="sparsityCorrChart"></canvas></div>
    </div>
    <div class="insight">Monte-Carlo, contrastive, and intervention methods are remarkably robust to reward sparsity (ranking accuracy varies by less than 0.02). TD(lambda) shows the most sensitivity, dropping from 0.60 to 0.44 under sparse rewards.</div>
  </div>

  <div id="convergence" class="panel">
    <div class="grid">
      <div class="chart-card">
        <h3>Correlation Convergence</h3>
        <div class="chart-container"><canvas id="convCorr"></canvas></div>
      </div>
      <div class="chart-card">
        <h3>MSE Convergence</h3>
        <div class="chart-container"><canvas id="convMSE"></canvas></div>
      </div>
    </div>
    <div class="insight">Monte-Carlo converges rapidly to high correlation within ~50 evaluation steps. Contrastive shows steady improvement throughout training. TD(lambda) plateaus at low correlation early, indicating fundamental limitations rather than slow convergence.</div>
  </div>

  <div id="multiseed" class="panel">
    <div class="chart-card">
      <h3>Multi-Seed Validation (5 Seeds)</h3>
      <div class="chart-container"><canvas id="multiseedChart"></canvas></div>
    </div>
    <div class="chart-card">
      <h3>Statistical Summary</h3>
      <table>
        <thead><tr><th>Method</th><th>Corr Mean +/- Std</th><th>MSE Mean +/- Std</th><th>Rank Mean +/- Std</th></tr></thead>
        <tbody>
          <tr><td>Monte-Carlo</td><td>0.994 +/- 0.003</td><td>0.229 +/- 0.055</td><td>0.944 +/- 0.004</td></tr>
          <tr><td>Contrastive</td><td>0.912 +/- 0.010</td><td>1.139 +/- 0.050</td><td>0.825 +/- 0.007</td></tr>
          <tr><td>Intervention</td><td>0.767 +/- 0.049</td><td>1.064 +/- 0.080</td><td>0.836 +/- 0.013</td></tr>
          <tr><td>TD(lambda)</td><td>0.198 +/- 0.026</td><td>1.008 +/- 0.258</td><td>0.526 +/- 0.033</td></tr>
        </tbody>
      </table>
      <div class="insight">Monte-Carlo exhibits the lowest variance (std=0.003 for correlation), confirming reliability. Intervention shows the highest variance (std=0.049), suggesting environment sensitivity. TD(lambda) consistently underperforms with systematic failure rather than random variation.</div>
    </div>
  </div>
</div>

<div class="footer">Training Process Reward Models for Long LLM Reasoning Traces &mdash; Computational Study</div>

<script>
const colors = { mc: '#2980b9', td: '#e74c3c', ct: '#27ae60', iv: '#f39c12' };

function showPanel(id) {
  document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  event.target.classList.add('active');
}

// Overview bar chart
new Chart(document.getElementById('overviewChart'), {
  type: 'bar',
  data: {
    labels: ['Monte-Carlo', 'Contrastive', 'Intervention', 'TD(lambda)'],
    datasets: [
      { label: 'Correlation', data: [0.996, 0.910, 0.768, 0.207], backgroundColor: colors.mc },
      { label: 'Ranking Acc.', data: [0.942, 0.825, 0.852, 0.572], backgroundColor: colors.iv }
    ]
  },
  options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'top' } }, scales: { y: { beginAtZero: true, max: 1.1 } } }
});

// Trace length correlation
new Chart(document.getElementById('traceLenCorr'), {
  type: 'line',
  data: {
    labels: ['8', '16', '32', '64'],
    datasets: [
      { label: 'Monte-Carlo', data: [0.994, 0.995, 0.993, 0.994], borderColor: colors.mc, fill: false, tension: 0.3 },
      { label: 'Contrastive', data: [0.930, 0.917, 0.805, 0.555], borderColor: colors.ct, fill: false, tension: 0.3 },
      { label: 'Intervention', data: [0.924, 0.783, 0.526, 0.291], borderColor: colors.iv, fill: false, tension: 0.3 },
      { label: 'TD(lambda)', data: [0.429, 0.190, 0.059, 0.019], borderColor: colors.td, fill: false, tension: 0.3 }
    ]
  },
  options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true, max: 1.1, title: { display: true, text: 'Correlation' } }, x: { title: { display: true, text: 'Trace Length' } } } }
});

// Trace length ranking
new Chart(document.getElementById('traceLenRank'), {
  type: 'line',
  data: {
    labels: ['8', '16', '32', '64'],
    datasets: [
      { label: 'Monte-Carlo', data: [0.952, 0.957, 0.943, 0.938], borderColor: colors.mc, fill: false, tension: 0.3 },
      { label: 'Contrastive', data: [0.775, 0.826, 0.768, 0.676], borderColor: colors.ct, fill: false, tension: 0.3 },
      { label: 'Intervention', data: [0.792, 0.826, 0.707, 0.632], borderColor: colors.iv, fill: false, tension: 0.3 },
      { label: 'TD(lambda)', data: [0.500, 0.512, 0.508, 0.521], borderColor: colors.td, fill: false, tension: 0.3 }
    ]
  },
  options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true, max: 1.1, title: { display: true, text: 'Ranking Accuracy' } }, x: { title: { display: true, text: 'Trace Length' } } } }
});

// Sparsity ranking
new Chart(document.getElementById('sparsityChart'), {
  type: 'bar',
  data: {
    labels: ['Dense', 'Moderate', 'Sparse', 'Very Sparse'],
    datasets: [
      { label: 'Monte-Carlo', data: [0.954, 0.951, 0.950, 0.954], backgroundColor: colors.mc },
      { label: 'Contrastive', data: [0.829, 0.827, 0.822, 0.839], backgroundColor: colors.ct },
      { label: 'Intervention', data: [0.819, 0.832, 0.839, 0.823], backgroundColor: colors.iv },
      { label: 'TD(lambda)', data: [0.558, 0.598, 0.440, 0.460], backgroundColor: colors.td }
    ]
  },
  options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true, max: 1.1, title: { display: true, text: 'Ranking Accuracy' } } } }
});

// Sparsity correlation
new Chart(document.getElementById('sparsityCorrChart'), {
  type: 'bar',
  data: {
    labels: ['Dense', 'Moderate', 'Sparse', 'Very Sparse'],
    datasets: [
      { label: 'Monte-Carlo', data: [0.996, 0.996, 0.995, 0.995], backgroundColor: colors.mc },
      { label: 'Contrastive', data: [0.899, 0.905, 0.907, 0.925], backgroundColor: colors.ct },
      { label: 'Intervention', data: [0.782, 0.769, 0.855, 0.842], backgroundColor: colors.iv },
      { label: 'TD(lambda)', data: [0.135, 0.251, 0.226, 0.290], backgroundColor: colors.td }
    ]
  },
  options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true, max: 1.1, title: { display: true, text: 'Correlation' } } } }
});

// Convergence correlation
const corrMC = [0.148,0.790,0.917,0.956,0.971,0.979,0.984,0.987,0.990,0.991,0.992,0.993,0.993,0.994,0.994,0.995,0.995,0.995,0.995,0.995,0.995,0.995,0.996,0.996,0.996,0.996,0.996,0.996,0.996,0.996,0.996,0.996,0.996,0.996,0.996,0.996,0.996,0.996,0.996,0.997,0.997];
const corrTD = [0.253,0.262,0.267,0.274,0.284,0.289,0.301,0.301,0.310,0.317,0.323,0.322,0.331,0.331,0.337,0.343,0.354,0.359,0.370,0.375,0.381,0.388,0.398,0.402,0.404,0.406,0.410,0.412,0.416,0.418,0.421,0.426,0.433,0.441,0.444,0.448,0.450,0.453,0.460,0.463,0.464];
const corrCT = [-0.174,-0.100,-0.026,0.050,0.122,0.194,0.263,0.327,0.389,0.447,0.500,0.549,0.591,0.629,0.663,0.692,0.717,0.740,0.760,0.778,0.794,0.808,0.820,0.832,0.842,0.851,0.860,0.867,0.874,0.880,0.886,0.891,0.896,0.900,0.904,0.908,0.911,0.915,0.917,0.920,0.922];
const corrIV = [0.006,0.102,0.189,0.264,0.329,0.381,0.425,0.458,0.486,0.509,0.530,0.548,0.564,0.578,0.592,0.604,0.615,0.625,0.635,0.645,0.654,0.663,0.672,0.680,0.687,0.694,0.702,0.709,0.716,0.722,0.729,0.736,0.742,0.748,0.753,0.759,0.765,0.770,0.775,0.780,0.784];
const steps = Array.from({length: 41}, (_, i) => i * 10);

new Chart(document.getElementById('convCorr'), {
  type: 'line',
  data: {
    labels: steps,
    datasets: [
      { label: 'Monte-Carlo', data: corrMC, borderColor: colors.mc, fill: false, pointRadius: 1 },
      { label: 'Contrastive', data: corrCT, borderColor: colors.ct, fill: false, pointRadius: 1 },
      { label: 'Intervention', data: corrIV, borderColor: colors.iv, fill: false, pointRadius: 1 },
      { label: 'TD(lambda)', data: corrTD, borderColor: colors.td, fill: false, pointRadius: 1 }
    ]
  },
  options: { responsive: true, maintainAspectRatio: false, scales: { y: { min: -0.2, max: 1.05, title: { display: true, text: 'Correlation' } }, x: { title: { display: true, text: 'Training Step (x10)' } } } }
});

// Convergence MSE
const mseMC = [1.104,1.095,1.149,1.073,1.063,0.953,0.972,0.978,0.813,0.873,0.820,0.748,0.804,0.730,0.668,0.594,0.710,0.593,0.618,0.536,0.524,0.553,0.506,0.480,0.504,0.431,0.400,0.435,0.417,0.412,0.385,0.366,0.327,0.292,0.300,0.269,0.256,0.279,0.268,0.236,0.250];
const mseTD = [1.088,1.044,1.053,1.144,1.227,1.120,1.114,1.057,1.249,1.221,1.042,1.180,1.128,1.323,1.154,1.160,1.140,1.245,1.153,1.159,1.188,1.222,1.357,1.107,1.205,1.092,1.103,1.141,1.267,1.296,1.100,1.216,1.205,1.203,1.127,1.051,1.161,1.168,1.126,1.126,1.215];

new Chart(document.getElementById('convMSE'), {
  type: 'line',
  data: {
    labels: steps,
    datasets: [
      { label: 'Monte-Carlo', data: mseMC, borderColor: colors.mc, fill: false, pointRadius: 1 },
      { label: 'TD(lambda)', data: mseTD, borderColor: colors.td, fill: false, pointRadius: 1 }
    ]
  },
  options: { responsive: true, maintainAspectRatio: false, scales: { y: { title: { display: true, text: 'MSE' } }, x: { title: { display: true, text: 'Training Step (x10)' } } } }
});

// Multi-seed chart
new Chart(document.getElementById('multiseedChart'), {
  type: 'bar',
  data: {
    labels: ['Monte-Carlo', 'Contrastive', 'Intervention', 'TD(lambda)'],
    datasets: [
      { label: 'Corr Mean', data: [0.994, 0.912, 0.767, 0.198], backgroundColor: [colors.mc, colors.ct, colors.iv, colors.td] },
    ]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    plugins: { legend: { display: false }, title: { display: true, text: 'Credit Assignment Correlation (mean across 5 seeds)' } },
    scales: { y: { beginAtZero: true, max: 1.1 } }
  }
});
</script>
</body>
</html>
