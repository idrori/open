<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Critical Pre-Training Fraction to Prevent Catastrophic Forgetting</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7"></script>
<style>
  :root{--primary:#1a3a5c;--accent:#2980b9;--bg:#f5f7fa;--card:#fff;--text:#333;--border:#d0d7de}
  *{margin:0;padding:0;box-sizing:border-box}
  body{font-family:'Segoe UI',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6}
  header{background:var(--primary);color:#fff;padding:2rem;text-align:center}
  header h1{font-size:1.5rem;margin-bottom:.5rem}
  header p{opacity:.85;font-size:.95rem;max-width:800px;margin:0 auto}
  .container{max-width:1200px;margin:0 auto;padding:1.5rem}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(560px,1fr));gap:1.5rem;margin-bottom:1.5rem}
  .card{background:var(--card);border-radius:8px;padding:1.5rem;box-shadow:0 1px 4px rgba(0,0,0,.08);border:1px solid var(--border)}
  .card h2{color:var(--primary);font-size:1.1rem;margin-bottom:1rem;border-bottom:2px solid var(--accent);padding-bottom:.5rem}
  .chart-container{position:relative;height:340px}
  table{width:100%;border-collapse:collapse;font-size:.85rem}
  th,td{padding:.5rem .75rem;text-align:right;border-bottom:1px solid var(--border)}
  th{background:var(--primary);color:#fff;font-weight:600}
  td:first-child,th:first-child{text-align:left}
  tr:hover{background:#eef3f8}
  .metric-row{display:flex;gap:1rem;margin-bottom:1.5rem;flex-wrap:wrap}
  .metric{flex:1;min-width:140px;background:var(--primary);color:#fff;border-radius:8px;padding:1rem;text-align:center}
  .metric .val{font-size:1.8rem;font-weight:700}
  .metric .label{font-size:.8rem;opacity:.85}
</style>
</head>
<body>
<header>
  <h1>Critical Pre-Training Fraction to Prevent Catastrophic Forgetting</h1>
  <p>Phase transition framework identifying the minimum pre-training data fraction alpha_c that prevents catastrophic forgetting during fine-tuning.</p>
</header>
<div class="container">
  <div class="metric-row">
    <div class="metric"><div class="val">0.947</div><div class="label">Analytical alpha_c</div></div>
    <div class="metric"><div class="val">0.55-0.83</div><div class="label">NN alpha_c Range</div></div>
    <div class="metric"><div class="val">5</div><div class="label">Domain Divergences</div></div>
    <div class="metric"><div class="val">11</div><div class="label">Model Architectures</div></div>
    <div class="metric"><div class="val">14</div><div class="label">Mixing Fractions</div></div>
  </div>
  <div class="grid">
    <div class="card">
      <h2>Forgetting vs. Mixing Fraction (alpha)</h2>
      <div class="chart-container"><canvas id="chartForgetting"></canvas></div>
    </div>
    <div class="card">
      <h2>Adaptation vs. Mixing Fraction (alpha)</h2>
      <div class="chart-container"><canvas id="chartAdapt"></canvas></div>
    </div>
    <div class="card">
      <h2>Critical alpha vs. Domain Divergence (Analytical)</h2>
      <div class="chart-container"><canvas id="chartAnalytical"></canvas></div>
    </div>
    <div class="card">
      <h2>Critical alpha vs. Model Size</h2>
      <div class="chart-container"><canvas id="chartModelSize"></canvas></div>
    </div>
  </div>
  <div class="card" style="margin-bottom:1.5rem">
    <h2>Neural Network Forgetting Across Domain Similarities</h2>
    <table>
      <thead><tr><th>cos_sim</th><th>alpha=0.0</th><th>alpha=0.2</th><th>alpha=0.4</th><th>alpha=0.6</th><th>alpha=0.8</th><th>alpha=1.0</th></tr></thead>
      <tbody>
        <tr><td>0.9</td><td>0.067</td><td>0.039</td><td>0.016</td><td>0.000</td><td>0.000</td><td>0.000</td></tr>
        <tr><td>0.7</td><td>0.236</td><td>0.149</td><td>0.080</td><td>0.031</td><td>0.000</td><td>0.000</td></tr>
        <tr><td>0.5</td><td>0.411</td><td>0.265</td><td>0.147</td><td>0.063</td><td>0.005</td><td>0.000</td></tr>
        <tr><td>0.3</td><td>0.590</td><td>0.384</td><td>0.216</td><td>0.095</td><td>0.014</td><td>0.000</td></tr>
        <tr><td>0.1</td><td>0.771</td><td>0.504</td><td>0.286</td><td>0.129</td><td>0.023</td><td>0.000</td></tr>
      </tbody>
    </table>
  </div>
  <div class="card">
    <h2>Model Size Scaling (cos_sim=0.5)</h2>
    <table>
      <thead><tr><th>Architecture</th><th>Params</th><th>alpha_c</th><th>Sharpness</th></tr></thead>
      <tbody>
        <tr><td>[16]</td><td>353</td><td>0.546</td><td>24.2</td></tr>
        <tr><td>[32]</td><td>705</td><td>0.687</td><td>43.3</td></tr>
        <tr><td>[64]</td><td>1,409</td><td>0.781</td><td>89.3</td></tr>
        <tr><td>[128]</td><td>2,817</td><td>0.765</td><td>137.3</td></tr>
        <tr><td>[64,64]</td><td>5,569</td><td>0.781</td><td>124.2</td></tr>
        <tr><td>[128,128]</td><td>19,329</td><td><strong>0.828</strong></td><td>238.9</td></tr>
      </tbody>
    </table>
  </div>
</div>
<script>
var C={responsive:true,maintainAspectRatio:false,plugins:{legend:{labels:{font:{size:11}}}}};
var alphas=[0,0.05,0.1,0.15,0.2,0.25,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1.0];
var aLabels=alphas.map(function(a){return a.toFixed(2);});

var f09=[0.067,0.060,0.052,0.045,0.039,0.030,0.026,0.016,0.006,0,0,0,0,0];
var f07=[0.236,0.212,0.188,0.167,0.149,0.124,0.110,0.080,0.051,0.031,0.012,0,0,0];
var f05=[0.411,0.370,0.331,0.295,0.265,0.221,0.199,0.147,0.099,0.063,0.031,0.005,0,0];
var f03=[0.590,0.532,0.477,0.426,0.384,0.322,0.289,0.216,0.148,0.095,0.050,0.014,0,0];
var f01=[0.771,0.696,0.625,0.558,0.504,0.423,0.381,0.286,0.198,0.129,0.070,0.023,0,0];

new Chart(document.getElementById('chartForgetting'),{type:'line',data:{labels:aLabels,datasets:[{label:'cos=0.9',data:f09,borderColor:'#1a3a5c',tension:.3,pointRadius:3},{label:'cos=0.7',data:f07,borderColor:'#2980b9',tension:.3,pointRadius:3},{label:'cos=0.5',data:f05,borderColor:'#8e44ad',tension:.3,pointRadius:3},{label:'cos=0.3',data:f03,borderColor:'#27ae60',tension:.3,pointRadius:3},{label:'cos=0.1',data:f01,borderColor:'#e74c3c',tension:.3,pointRadius:3}]},options:{...C,scales:{y:{title:{display:true,text:'Forgetting'}},x:{title:{display:true,text:'Mixing Fraction (alpha)'}}}}});

var a09=[0.087,0.088,0.088,0.088,0.087,0.085,0.084,0.080,0.074,0.066,0.056,0.043,0.031,0.012];
var a07=[0.270,0.270,0.269,0.267,0.263,0.256,0.251,0.236,0.214,0.188,0.156,0.114,0.071,0.012];
var a05=[0.465,0.464,0.462,0.457,0.450,0.437,0.428,0.401,0.363,0.318,0.261,0.188,0.114,0.011];
var a03=[0.669,0.667,0.663,0.656,0.646,0.627,0.614,0.574,0.519,0.452,0.371,0.266,0.158,0.010];
var a01=[0.882,0.878,0.872,0.862,0.849,0.823,0.805,0.752,0.679,0.591,0.484,0.346,0.203,0.009];

new Chart(document.getElementById('chartAdapt'),{type:'line',data:{labels:aLabels,datasets:[{label:'cos=0.9',data:a09,borderColor:'#1a3a5c',tension:.3,pointRadius:3},{label:'cos=0.7',data:a07,borderColor:'#2980b9',tension:.3,pointRadius:3},{label:'cos=0.5',data:a05,borderColor:'#8e44ad',tension:.3,pointRadius:3},{label:'cos=0.3',data:a03,borderColor:'#27ae60',tension:.3,pointRadius:3},{label:'cos=0.1',data:a01,borderColor:'#e74c3c',tension:.3,pointRadius:3}]},options:{...C,scales:{y:{title:{display:true,text:'Adaptation'}},x:{title:{display:true,text:'Mixing Fraction (alpha)'}}}}});

var divs=[0.01,0.085,0.186,0.286,0.387,0.487,0.588,0.688,0.789,0.889,0.99];
var acNum=[0.864,0.906,0.925,0.935,0.941,0.947,0.949,0.953,0.955,0.957,0.957];
var acAppr=[0.932,0.949,0.959,0.964,0.968,0.970,0.973,0.974,0.975,0.976,0.977];
new Chart(document.getElementById('chartAnalytical'),{type:'line',data:{labels:divs.map(function(d){return d.toFixed(2);}),datasets:[{label:'Numerical',data:acNum,borderColor:'#1a3a5c',pointRadius:4,tension:.3},{label:'Approximation',data:acAppr,borderColor:'#2980b9',borderDash:[5,5],pointRadius:4,tension:.3}]},options:{...C,scales:{y:{min:0.85,max:1.0,title:{display:true,text:'Critical alpha'}},x:{title:{display:true,text:'Domain Divergence'}}}}});

var params=[353,705,1057,1409,2113,2817,1761,3457,5569,11009,19329];
var acSize=[0.546,0.687,0.687,0.781,0.734,0.765,0.484,0.718,0.781,0.718,0.828];
new Chart(document.getElementById('chartModelSize'),{type:'scatter',data:{datasets:[{label:'alpha_c vs Params',data:params.map(function(p,i){return {x:p,y:acSize[i]};}),backgroundColor:'rgba(41,128,185,0.8)',pointRadius:6}]},options:{...C,scales:{y:{min:0.4,max:0.9,title:{display:true,text:'Critical alpha'}},x:{type:'logarithmic',title:{display:true,text:'Number of Parameters (log)'}}}}});
</script>
</body>
</html>
