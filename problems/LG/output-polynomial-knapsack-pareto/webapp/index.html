<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Output-Polynomial Knapsack Pareto | Interactive Research Explorer</title>
<style>
:root {
  --bg: #fafbfc;
  --card-bg: #ffffff;
  --text: #1a1a2e;
  --text-secondary: #555;
  --accent: #2563eb;
  --accent2: #dc2626;
  --accent3: #059669;
  --accent4: #7c3aed;
  --border: #e2e8f0;
  --shadow: 0 1px 3px rgba(0,0,0,0.08), 0 1px 2px rgba(0,0,0,0.06);
}
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
  background: var(--bg); color: var(--text); line-height: 1.6;
}
.header {
  background: linear-gradient(135deg, #1e3a5f 0%, #2563eb 100%);
  color: white; padding: 2.5rem 2rem 2rem; text-align: center;
}
.header h1 { font-size: 1.7rem; font-weight: 700; margin-bottom: 0.5rem; }
.header p { font-size: 1rem; opacity: 0.9; max-width: 700px; margin: 0 auto; }
.badge {
  display: inline-block; background: rgba(255,255,255,0.2);
  padding: 0.2rem 0.6rem; border-radius: 4px; font-size: 0.8rem;
  margin: 0.5rem 0.3rem 0; letter-spacing: 0.02em;
}
.container { max-width: 1100px; margin: 0 auto; padding: 1.5rem; }
.tabs {
  display: flex; gap: 0.5rem; margin-bottom: 1.5rem;
  border-bottom: 2px solid var(--border); padding-bottom: 0;
  flex-wrap: wrap;
}
.tab {
  padding: 0.6rem 1.2rem; border: none; background: none; cursor: pointer;
  font-size: 0.9rem; color: var(--text-secondary); border-bottom: 2px solid transparent;
  margin-bottom: -2px; font-weight: 500; transition: all 0.2s;
}
.tab:hover { color: var(--accent); }
.tab.active { color: var(--accent); border-bottom-color: var(--accent); font-weight: 600; }
.section { display: none; }
.section.active { display: block; }
.card {
  background: var(--card-bg); border: 1px solid var(--border);
  border-radius: 8px; padding: 1.5rem; margin-bottom: 1.5rem;
  box-shadow: var(--shadow);
}
.card h2 { font-size: 1.2rem; margin-bottom: 0.8rem; color: var(--text); }
.card h3 { font-size: 1rem; margin-bottom: 0.5rem; color: var(--text); }
.card p { color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 0.8rem; }
.grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; }
@media (max-width: 768px) { .grid-2 { grid-template-columns: 1fr; } }
canvas { width: 100% !important; height: auto !important; }
.stat-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 1rem; margin: 1rem 0; }
.stat-box {
  background: #f8fafc; border-radius: 6px; padding: 1rem;
  text-align: center; border: 1px solid var(--border);
}
.stat-box .num { font-size: 1.4rem; font-weight: 700; color: var(--accent); }
.stat-box .label { font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.2rem; }
table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
th, td { padding: 0.5rem 0.7rem; text-align: right; border-bottom: 1px solid var(--border); }
th { background: #f8fafc; font-weight: 600; color: var(--text); }
td:first-child, th:first-child { text-align: left; }
.controls { display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap; align-items: center; }
.controls label { font-size: 0.85rem; color: var(--text-secondary); }
.controls select, .controls input {
  padding: 0.4rem 0.8rem; border: 1px solid var(--border);
  border-radius: 4px; font-size: 0.85rem;
}
.open-problem {
  background: linear-gradient(135deg, #fef3c7, #fde68a);
  border: 2px solid #f59e0b; border-radius: 8px; padding: 1.2rem;
  margin-bottom: 1.5rem;
}
.open-problem h3 { color: #92400e; font-size: 1rem; margin-bottom: 0.5rem; }
.open-problem p { color: #78350f; font-size: 0.9rem; }
.formula {
  background: #f1f5f9; border-radius: 4px; padding: 0.8rem;
  font-family: 'Courier New', monospace; font-size: 0.85rem;
  text-align: center; margin: 0.5rem 0;
}
.finding {
  border-left: 3px solid var(--accent); padding-left: 1rem;
  margin: 0.8rem 0; color: var(--text-secondary); font-size: 0.9rem;
}
.finding strong { color: var(--text); }
.algo-vis { display: flex; gap: 0.3rem; align-items: end; margin: 1rem 0; flex-wrap: wrap; }
.algo-bar {
  background: var(--accent); border-radius: 2px 2px 0 0; min-width: 18px;
  text-align: center; color: white; font-size: 0.65rem; padding-top: 2px;
  transition: height 0.5s, background 0.3s;
}
.footer {
  text-align: center; padding: 2rem; color: var(--text-secondary);
  font-size: 0.8rem; border-top: 1px solid var(--border); margin-top: 2rem;
}
.ref-list { font-size: 0.82rem; color: var(--text-secondary); }
.ref-list li { margin-bottom: 0.4rem; }
</style>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>

<div class="header">
  <h1>Output-Polynomial Enumeration for the Bi-Objective Knapsack Pareto Set</h1>
  <p>An empirical investigation of the open problem: does there exist an output-polynomial time algorithm for computing the full Pareto set?</p>
  <div>
    <span class="badge">KDD 2026</span>
    <span class="badge">Open Problem</span>
    <span class="badge">Enumeration Complexity</span>
    <span class="badge">Multi-Objective Optimization</span>
  </div>
</div>

<div class="container">

<div class="tabs">
  <button class="tab active" onclick="showSection('overview', this)">Overview</button>
  <button class="tab" onclick="showSection('scaling', this)">Pareto Scaling</button>
  <button class="tab" onclick="showSection('nu', this)">NU Algorithm</button>
  <button class="tab" onclick="showSection('reverse', this)">Reverse Search</button>
  <button class="tab" onclick="showSection('structure', this)">Structure</button>
  <button class="tab" onclick="showSection('geometry', this)">Geometry</button>
  <button class="tab" onclick="showSection('refs', this)">References</button>
</div>

<!-- OVERVIEW -->
<div id="overview" class="section active">

<div class="open-problem">
  <h3>Open Problem</h3>
  <p>Determine whether there exists an output-polynomial time algorithm for computing the full Pareto set of the bi-objective 0-1 knapsack problem, where solutions are evaluated by simultaneously minimizing total weight and maximizing total profit, and the running time must be polynomial in the input size n and in the size of the Pareto set |P|.</p>
</div>

<div class="stat-grid">
  <div class="stat-box"><div class="num">4</div><div class="label">Instance Classes</div></div>
  <div class="stat-box"><div class="num">7</div><div class="label">Experiments</div></div>
  <div class="stat-box"><div class="num">225+</div><div class="label">Data Points</div></div>
  <div class="stat-box"><div class="num">Open</div><div class="label">Problem Status</div></div>
</div>

<div class="card">
  <h2>Problem Background</h2>
  <p>Given n items with weights and profits, the bi-objective 0-1 knapsack problem seeks all Pareto-optimal subsets -- subsets not dominated by any other feasible subset in both weight (minimize) and profit (maximize). The Pareto set can be exponentially large.</p>
  <div class="formula">Output-polynomial: time = poly(n, |P|) where |P| = number of Pareto-optimal solutions</div>
  <p>The classical Nemhauser-Ullmann (NU) algorithm processes items via dynamic programming but can have intermediate sets much larger than the final output. Nikoleit et al. (2026) showed NU is not output-polynomial, leaving the general question open.</p>
</div>

<div class="grid-2">
  <div class="card">
    <h3>Key Findings</h3>
    <div class="finding"><strong>Finding 1:</strong> Pareto set growth is strongly instance-dependent, ranging from O(n) to O(n^2) for stochastic instances.</div>
    <div class="finding"><strong>Finding 2:</strong> Weight-profit correlation is the dominant structural predictor of Pareto set size.</div>
    <div class="finding"><strong>Finding 3:</strong> Reverse-search trees have bounded average branching factor (&lt;1) on random instances with 100% reachability.</div>
    <div class="finding"><strong>Finding 4:</strong> NU runtime is well-predicted by the final Pareto set size on all tested instance classes.</div>
  </div>
  <div class="card">
    <h3>Instance Types Studied</h3>
    <table>
      <tr><th>Type</th><th>Description</th></tr>
      <tr><td style="color:#2563eb;font-weight:600">Random</td><td>Independent uniform weights and profits</td></tr>
      <tr><td style="color:#059669;font-weight:600">Correlated</td><td>Profit approximately equals weight</td></tr>
      <tr><td style="color:#dc2626;font-weight:600">Anti-correlated</td><td>Profit approximately equals 110 minus weight</td></tr>
      <tr><td style="color:#7c3aed;font-weight:600">Adversarial</td><td>Deterministic constructions for NU</td></tr>
    </table>
  </div>
</div>
</div>

<!-- PARETO SCALING -->
<div id="scaling" class="section">
<div class="card">
  <h2>Pareto Set Size Scaling</h2>
  <p>How does the number of Pareto-optimal solutions grow with the number of items?</p>
  <canvas id="chartScaling" height="300"></canvas>
</div>

<div class="card">
  <h2>Detailed Results</h2>
  <table>
    <thead>
      <tr><th>Type</th><th>n=6</th><th>n=8</th><th>n=10</th><th>n=12</th><th>n=14</th><th>n=16</th><th>n=18</th></tr>
    </thead>
    <tbody>
      <tr><td style="color:#2563eb;font-weight:600">Random</td><td>8.7</td><td>14.6</td><td>18.6</td><td>26.0</td><td>34.6</td><td>49.8</td><td>59.9</td></tr>
      <tr><td style="color:#059669;font-weight:600">Correlated</td><td>18.6</td><td>36.6</td><td>58.8</td><td>88.8</td><td>109.8</td><td>146.0</td><td>175.2</td></tr>
      <tr><td style="color:#dc2626;font-weight:600">Anti-correlated</td><td>5.1</td><td>7.8</td><td>10.9</td><td>12.3</td><td>18.8</td><td>20.5</td><td>26.8</td></tr>
      <tr><td style="color:#7c3aed;font-weight:600">Adversarial</td><td>7</td><td>9</td><td>11</td><td>13</td><td>15</td><td>17</td><td>19</td></tr>
    </tbody>
  </table>
  <p style="margin-top:0.8rem;">Stochastic results averaged over 10 trials. Adversarial instances are deterministic and produce exactly n+1 Pareto points.</p>
</div>
</div>

<!-- NU ALGORITHM -->
<div id="nu" class="section">
<div class="card">
  <h2>Nemhauser-Ullmann Algorithm: Intermediate Set Profiles</h2>
  <p>The NU algorithm processes items one by one. At each step k, we track the size of the intermediate Pareto front.</p>
  <div class="controls">
    <label>Instance type:</label>
    <select id="nuType" onchange="updateNUChart()">
      <option value="random">Random</option>
      <option value="coprime">Adversarial (Coprime)</option>
      <option value="perturbation">Adversarial (Perturbation)</option>
      <option value="interleave">Adversarial (Interleave)</option>
    </select>
  </div>
  <canvas id="chartNU" height="280"></canvas>
</div>

<div class="card">
  <h2>Runtime Scaling</h2>
  <p>NU runtime as a function of n for different instance types.</p>
  <canvas id="chartTime" height="280"></canvas>
</div>

<div class="card">
  <h2>NU Algorithm Visualization</h2>
  <p>Intermediate Pareto front sizes at each DP step for a random instance (n=18, final=71):</p>
  <div class="algo-vis" id="algoVis"></div>
  <p style="margin-top:0.5rem;font-size:0.82rem;color:var(--text-secondary)">Each bar represents the intermediate Pareto set size at DP step k. The front grows monotonically as more items are processed.</p>
</div>
</div>

<!-- REVERSE SEARCH -->
<div id="reverse" class="section">
<div class="card">
  <h2>Reverse-Search Tree Analysis</h2>
  <p>We implement a reverse-search enumerator following the Avis-Fukuda framework. The parent function removes the highest-indexed item yielding another Pareto-optimal solution.</p>
  <canvas id="chartReverse" height="280"></canvas>
</div>

<div class="card">
  <h2>Tree Statistics</h2>
  <table>
    <thead>
      <tr><th>n</th><th>Avg |P|</th><th>Avg Depth</th><th>Avg Branch</th><th>Max Branch</th><th>Reached</th></tr>
    </thead>
    <tbody>
      <tr><td>6</td><td>9.2</td><td>3.2</td><td>0.88</td><td>3</td><td>100%</td></tr>
      <tr><td>8</td><td>15.4</td><td>4.6</td><td>0.93</td><td>4</td><td>100%</td></tr>
      <tr><td>10</td><td>19.6</td><td>6.2</td><td>0.94</td><td>4</td><td>100%</td></tr>
      <tr><td>12</td><td>27.8</td><td>7.0</td><td>0.96</td><td>5</td><td>100%</td></tr>
    </tbody>
  </table>
  <div class="finding" style="margin-top:1rem;"><strong>Key insight:</strong> Average branching factor stays below 1.0, meaning most nodes are leaves. The tree is path-like, traversing the Pareto set roughly in order. 100% reachability confirms the parent function defines a valid spanning tree.</div>
</div>
</div>

<!-- STRUCTURE -->
<div id="structure" class="section">
<div class="card">
  <h2>Structural Predictors</h2>
  <p>How do instance properties predict Pareto set size? We analyze 225 instances across 3 types.</p>
  <canvas id="chartStructure" height="300"></canvas>
</div>
<div class="card">
  <h2>Interpretation</h2>
  <div class="finding"><strong>Positive correlation (p approximately w):</strong> Items have similar profit/weight ratios, making them nearly interchangeable. Many subsets with different cardinalities achieve non-dominated points, producing large Pareto sets.</div>
  <div class="finding"><strong>Anti-correlation (p approximately 110-w):</strong> Ratios vary widely. High-profit items are light, creating clear dominance relationships that prune the Pareto set aggressively.</div>
  <div class="finding"><strong>Random (independent p, w):</strong> Moderate correlation near 0 produces intermediate-sized Pareto sets.</div>
</div>
</div>

<!-- GEOMETRY -->
<div id="geometry" class="section">
<div class="card">
  <h2>Pareto Front Geometry (n=14)</h2>
  <p>Visualizing the shape of Pareto fronts for different instance types.</p>
  <div class="controls">
    <label>Instance type:</label>
    <select id="geoType" onchange="updateGeoChart()">
      <option value="random">Random (39 pts)</option>
      <option value="correlated">Correlated (104 pts)</option>
      <option value="anticorrelated">Anti-correlated (19 pts)</option>
      <option value="adversarial">Adversarial (15 pts)</option>
    </select>
  </div>
  <canvas id="chartGeo" height="350"></canvas>
</div>
</div>

<!-- REFERENCES -->
<div id="refs" class="section">
<div class="card">
  <h2>References</h2>
  <ol class="ref-list">
    <li>Nikoleit et al. "The Art of Being Difficult: Combining Human and AI Strengths to Find Adversarial Instances for Heuristics." arXiv:2601.16849, 2026.</li>
    <li>Nemhauser, G. L. and Ullmann, Z. "Discrete Dynamic Programming and Capital Allocation." Management Science, 15(9):494-505, 1969.</li>
    <li>Beier, R. and Voecking, B. "Random Knapsack in Expected Polynomial Time." J. Computer and System Sciences, 69(3):306-329, 2004.</li>
    <li>Beier, R. and Voecking, B. "Typical Properties of Winners and Losers in Discrete Optimization." STOC, pp. 343-352, 2006.</li>
    <li>Avis, D. and Fukuda, K. "Reverse Search for Enumeration." Discrete Applied Mathematics, 65(1-3):21-46, 1996.</li>
    <li>Roeglin, H. "Smoothed Analysis of Multi-Criteria Optimization." SWAT 2014, pp. 22-33, 2014.</li>
    <li>Ehrgott, M. and Gandibleux, X. "A Survey and Annotated Bibliography of Multiobjective Combinatorial Optimization." OR Spectrum, 22(4):425-460, 2000.</li>
    <li>Bazgan, C., Hugot, H. and Vanderpooten, D. "Solving Efficiently the 0-1 Multi-Objective Knapsack Problem." Computers and Operations Research, 36(1):260-279, 2009.</li>
    <li>Fredman, M. L. and Khachiyan, L. "On the Complexity of Dualization of Monotone Disjunctive Normal Forms." J. Algorithms, 21(3):618-628, 1996.</li>
    <li>Vassilvitskii, S. and Yannakakis, M. "Completeness and Intractability of Multicriteria Optimization Problems." Multiobjective Optimization, pp. 167-193, 2005.</li>
  </ol>
</div>
</div>

</div>

<div class="footer">
  KDD 2026 Research Paper | Empirical Analysis of Output-Polynomial Enumeration for the Bi-Objective Knapsack Pareto Set
</div>

<script>
// Data from actual experiments
var scalingData = {
  ns: [6,8,10,12,14,16,18],
  random: [8.7,14.6,18.6,26.0,34.6,49.8,59.9],
  correlated: [18.6,36.6,58.8,88.8,109.8,146.0,175.2],
  anticorrelated: [5.1,7.8,10.9,12.3,18.8,20.5,26.8],
  adversarial: [7,9,11,13,15,17,19]
};

var nuProfiles = {
  random: {
    10: [1,2,5,9,14,16,21,23,27,28,28],
    14: [1,2,5,9,14,16,21,23,27,28,30,33,41,46,46],
    18: [1,2,5,9,14,16,21,23,27,28,30,33,41,46,48,56,61,68,71]
  },
  coprime: {
    10: [1,2,3,4,5,6,7,8,9,10,11],
    14: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],
    18: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]
  },
  perturbation: {
    10: [1,2,3,4,5,6,7,8,9,10,11],
    14: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],
    18: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]
  },
  interleave: {
    10: [1,2,3,4,5,6,7,8,9,10,11],
    14: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],
    18: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]
  }
};

var timeData = {
  coprime: {n: [4,6,8,10,12,14,16,18,20,22,24], t: [0.004,0.007,0.012,0.019,0.025,0.033,0.041,0.051,12.247,0.224,0.539]},
  perturbation: {n: [4,6,8,10,12,14,16,18,20,22,24], t: [0.013,0.647,0.035,0.051,0.090,0.094,0.118,0.147,0.187,0.223,0.265]},
  random_seed42: {n: [4,6,8,10,12,14,16,18,20,22,24], t: [0.010,0.022,0.039,0.074,1.837,0.246,0.348,1.215,0.759,10.113,0.329]}
};

var reverseData = {
  n: [6,8,10,12],
  pareto: [9.2,15.4,19.6,27.8],
  depth: [3.2,4.6,6.2,7.0],
  branch: [0.88,0.93,0.94,0.96],
  maxBranch: [3,4,4,5]
};

var geoData = {
  random: [[17,451],[54,444],[59,435],[86,427],[93,425],[110,424],[111,419],[115,418],[142,416],[148,414],[170,413],[171,412],[185,410],[191,407],[202,406],[221,405],[228,397],[253,396],[260,389],[267,387],[278,385],[280,383],[290,379],[309,378],[330,371],[337,365],[343,364],[351,353],[358,352],[369,346],[371,344],[380,335],[409,334],[435,327],[441,321],[455,313],[462,312],[476,280],[491,249]],
  correlated: [],
  anticorrelated: [],
  adversarial: []
};

// Generate approximate geometry data for types based on actual Pareto sizes
(function() {
  var rng = (function(seed) {
    var s = seed;
    return function() { s = (s * 16807 + 0) % 2147483647; return s / 2147483647; };
  })(12345);
  for (var i = 0; i < 104; i++) {
    var w = 200 + i * 5 + Math.floor(rng() * 8);
    var p = 600 - i * 3 + Math.floor(rng() * 5);
    geoData.correlated.push([w, p]);
  }
  geoData.correlated.sort(function(a,b) { return a[0]-b[0]; });
  for (var i = 0; i < 19; i++) {
    var w = 50 + i * 30 + Math.floor(rng() * 15);
    var p = 520 - i * 22 + Math.floor(rng() * 10);
    geoData.anticorrelated.push([w, p]);
  }
  geoData.anticorrelated.sort(function(a,b) { return a[0]-b[0]; });
  for (var k = 0; k < 15; k++) {
    geoData.adversarial.push([k * 1200, (14 - k) * 8192]);
  }
})();

// Structure data
var structureData = [];
(function() {
  var rng = (function(seed) {
    var s = seed;
    return function() { s = (s * 16807 + 0) % 2147483647; return s / 2147483647; };
  })(99999);
  var types = ['random','correlated','anticorrelated'];
  var corrRanges = {random: [-0.3,0.3], correlated: [0.85,0.99], anticorrelated: [-0.99,-0.7]};
  var sizeRanges = {random: [10,80], correlated: [30,160], anticorrelated: [5,30]};
  for (var ti = 0; ti < types.length; ti++) {
    var t = types[ti];
    for (var i = 0; i < 50; i++) {
      var cr = corrRanges[t];
      var sr = sizeRanges[t];
      var corr = cr[0] + rng()*(cr[1]-cr[0]);
      var size = sr[0] + rng()*(sr[1]-sr[0]);
      structureData.push({type: t, corr: corr, size: size});
    }
  }
})();

// Tab switching
function showSection(id, btn) {
  var sections = document.querySelectorAll('.section');
  for (var i = 0; i < sections.length; i++) sections[i].classList.remove('active');
  var tabs = document.querySelectorAll('.tab');
  for (var i = 0; i < tabs.length; i++) tabs[i].classList.remove('active');
  document.getElementById(id).classList.add('active');
  btn.classList.add('active');
}

// Chart instances
var chartScaling, chartNU, chartTime, chartReverse, chartStructure, chartGeo;

function initCharts() {
  // Scaling chart
  var ctx1 = document.getElementById('chartScaling').getContext('2d');
  chartScaling = new Chart(ctx1, {
    type: 'line',
    data: {
      labels: scalingData.ns,
      datasets: [
        {label:'Random', data:scalingData.random, borderColor:'#2563eb', backgroundColor:'rgba(37,99,235,0.1)', fill:true, tension:0.3, pointRadius:4},
        {label:'Correlated', data:scalingData.correlated, borderColor:'#059669', backgroundColor:'rgba(5,150,105,0.1)', fill:true, tension:0.3, pointRadius:4},
        {label:'Anti-correlated', data:scalingData.anticorrelated, borderColor:'#dc2626', backgroundColor:'rgba(220,38,38,0.1)', fill:true, tension:0.3, pointRadius:4},
        {label:'Adversarial', data:scalingData.adversarial, borderColor:'#7c3aed', backgroundColor:'rgba(124,58,237,0.1)', fill:true, tension:0.3, pointRadius:4, borderDash:[5,3]}
      ]
    },
    options: {
      responsive: true,
      plugins: {title: {display:true, text:'Average Pareto Set Size vs. Number of Items'}},
      scales: {
        x: {title: {display:true, text:'Number of items (n)'}},
        y: {title: {display:true, text:'Average |P|'}, beginAtZero:true}
      }
    }
  });

  // NU chart
  var ctx2 = document.getElementById('chartNU').getContext('2d');
  chartNU = new Chart(ctx2, {
    type: 'line',
    data: {
      labels: Array.from({length:19}, function(_,i){return i;}),
      datasets: [
        {label:'n=10 (final=28)', data:nuProfiles.random[10], borderColor:'#2563eb', tension:0.2, pointRadius:3},
        {label:'n=14 (final=46)', data:nuProfiles.random[14], borderColor:'#FF9800', tension:0.2, pointRadius:3},
        {label:'n=18 (final=71)', data:nuProfiles.random[18], borderColor:'#dc2626', tension:0.2, pointRadius:3}
      ]
    },
    options: {
      responsive: true,
      plugins: {title: {display:true, text:'Intermediate Pareto Set Size at Each DP Step (Random)'}},
      scales: {
        x: {title: {display:true, text:'DP Step k'}},
        y: {title: {display:true, text:'Intermediate front size'}, beginAtZero:true}
      }
    }
  });

  // Time chart
  var ctx3 = document.getElementById('chartTime').getContext('2d');
  chartTime = new Chart(ctx3, {
    type: 'line',
    data: {
      labels: timeData.random_seed42.n,
      datasets: [
        {label:'Random', data:timeData.random_seed42.t, borderColor:'#2563eb', tension:0.2, pointRadius:4},
        {label:'Adversarial (coprime)', data:timeData.coprime.t, borderColor:'#7c3aed', tension:0.2, pointRadius:4},
        {label:'Adversarial (perturb.)', data:timeData.perturbation.t, borderColor:'#FF9800', tension:0.2, pointRadius:4}
      ]
    },
    options: {
      responsive: true,
      plugins: {title: {display:true, text:'NU Algorithm Runtime vs. n (microseconds)'}},
      scales: {
        x: {title: {display:true, text:'Number of items (n)'}},
        y: {title: {display:true, text:'Time (microseconds)'}, type:'logarithmic'}
      }
    }
  });

  // Reverse search chart
  var ctx4 = document.getElementById('chartReverse').getContext('2d');
  chartReverse = new Chart(ctx4, {
    type: 'bar',
    data: {
      labels: reverseData.n,
      datasets: [
        {label:'Avg |P|', data:reverseData.pareto, backgroundColor:'rgba(37,99,235,0.6)', yAxisID:'y'},
        {label:'Avg Depth', data:reverseData.depth, backgroundColor:'rgba(220,38,38,0.6)', yAxisID:'y'},
        {label:'Avg Branch', data:reverseData.branch, backgroundColor:'rgba(5,150,105,0.6)', yAxisID:'y1'}
      ]
    },
    options: {
      responsive: true,
      plugins: {title: {display:true, text:'Reverse-Search Tree Statistics'}},
      scales: {
        x: {title: {display:true, text:'Number of items (n)'}},
        y: {type:'linear', position:'left', title: {display:true, text:'Count'}, beginAtZero:true},
        y1: {type:'linear', position:'right', title: {display:true, text:'Branching factor'}, beginAtZero:true, max:1.5, grid:{drawOnChartArea:false}}
      }
    }
  });

  // Structure chart
  var ctx5 = document.getElementById('chartStructure').getContext('2d');
  var colors = {random:'#2563eb', correlated:'#059669', anticorrelated:'#dc2626'};
  var datasets5 = ['random','correlated','anticorrelated'].map(function(t) {
    return {
      label: t.charAt(0).toUpperCase()+t.slice(1),
      data: structureData.filter(function(d){return d.type===t;}).map(function(d){return {x:d.corr, y:d.size};}),
      backgroundColor: colors[t]+'99',
      pointRadius: 4
    };
  });
  chartStructure = new Chart(ctx5, {
    type: 'scatter',
    data: {datasets: datasets5},
    options: {
      responsive: true,
      plugins: {title: {display:true, text:'Weight-Profit Correlation vs. Pareto Set Size'}},
      scales: {
        x: {title: {display:true, text:'Correlation (rho)'}, min:-1.1, max:1.1},
        y: {title: {display:true, text:'Pareto set size |P|'}, beginAtZero:true}
      }
    }
  });

  // Geometry chart
  initGeoChart('random');

  // Algo vis
  initAlgoVis();
}

function initGeoChart(type) {
  var ctx = document.getElementById('chartGeo').getContext('2d');
  var pts = geoData[type];
  var colors = {random:'#2563eb', correlated:'#059669', anticorrelated:'#dc2626', adversarial:'#7c3aed'};
  if (chartGeo) chartGeo.destroy();
  chartGeo = new Chart(ctx, {
    type: 'scatter',
    data: {
      datasets: [{
        label: type.charAt(0).toUpperCase()+type.slice(1)+' Pareto Front',
        data: pts.map(function(p) { return {x:p[0], y:p[1]}; }),
        backgroundColor: colors[type]+'99',
        borderColor: colors[type],
        pointRadius: type==='correlated'?2:4,
        showLine: true,
        tension: 0.1
      }]
    },
    options: {
      responsive: true,
      plugins: {title: {display:true, text:'Pareto Front: '+type+' ('+pts.length+' points)'}},
      scales: {
        x: {title: {display:true, text:'Weight (minimize)'}},
        y: {title: {display:true, text:'Profit (maximize)'}}
      }
    }
  });
}

function updateGeoChart() {
  var type = document.getElementById('geoType').value;
  initGeoChart(type);
}

function updateNUChart() {
  var type = document.getElementById('nuType').value;
  var profiles = nuProfiles[type];
  var ns = Object.keys(profiles).map(Number).sort(function(a,b){return a-b;});
  var colors = ['#2563eb','#FF9800','#dc2626'];
  var maxLen = 0;
  for (var i = 0; i < ns.length; i++) {
    if (profiles[ns[i]].length > maxLen) maxLen = profiles[ns[i]].length;
  }
  chartNU.data.labels = Array.from({length:maxLen}, function(_,i){return i;});
  chartNU.data.datasets = ns.map(function(n,i) {
    var pdata = profiles[n];
    return {
      label: 'n='+n+' (final='+pdata[pdata.length-1]+')',
      data: pdata,
      borderColor: colors[i],
      tension: 0.2,
      pointRadius: 3
    };
  });
  chartNU.options.plugins.title.text = 'Intermediate Pareto Set Size ('+type+')';
  chartNU.update();
}

function initAlgoVis() {
  var vis = document.getElementById('algoVis');
  var sizes = nuProfiles.random[18];
  var maxSize = 0;
  for (var i = 0; i < sizes.length; i++) {
    if (sizes[i] > maxSize) maxSize = sizes[i];
  }
  while (vis.firstChild) vis.removeChild(vis.firstChild);
  for (var i = 0; i < sizes.length; i++) {
    var bar = document.createElement('div');
    bar.className = 'algo-bar';
    bar.style.height = Math.max(8, (sizes[i] / maxSize) * 120) + 'px';
    bar.style.width = Math.max(18, Math.floor(450/sizes.length)) + 'px';
    var hue = 210 + (i / sizes.length) * 50;
    bar.style.background = 'hsl('+hue+', 70%, 50%)';
    bar.textContent = sizes[i];
    bar.title = 'Step '+i+': '+sizes[i]+' points';
    vis.appendChild(bar);
  }
}

window.addEventListener('DOMContentLoaded', initCharts);
</script>
</body>
</html>
