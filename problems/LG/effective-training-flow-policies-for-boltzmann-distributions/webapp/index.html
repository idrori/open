<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Training Flow Policies for Boltzmann Distributions</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7"></script>
<style>
  :root{--primary:#1a3a5c;--accent:#2980b9;--bg:#f5f7fa;--card:#fff;--text:#333;--border:#d0d7de}
  *{margin:0;padding:0;box-sizing:border-box}
  body{font-family:'Segoe UI',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6}
  header{background:var(--primary);color:#fff;padding:2rem;text-align:center}
  header h1{font-size:1.5rem;margin-bottom:.5rem}
  header p{opacity:.85;font-size:.95rem;max-width:800px;margin:0 auto}
  .container{max-width:1200px;margin:0 auto;padding:1.5rem}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(560px,1fr));gap:1.5rem;margin-bottom:1.5rem}
  .card{background:var(--card);border-radius:8px;padding:1.5rem;box-shadow:0 1px 4px rgba(0,0,0,.08);border:1px solid var(--border)}
  .card h2{color:var(--primary);font-size:1.1rem;margin-bottom:1rem;border-bottom:2px solid var(--accent);padding-bottom:.5rem}
  .chart-container{position:relative;height:340px}
  table{width:100%;border-collapse:collapse;font-size:.85rem}
  th,td{padding:.5rem .75rem;text-align:right;border-bottom:1px solid var(--border)}
  th{background:var(--primary);color:#fff;font-weight:600}
  td:first-child,th:first-child{text-align:left}
  tr:hover{background:#eef3f8}
  .metric-row{display:flex;gap:1rem;margin-bottom:1.5rem;flex-wrap:wrap}
  .metric{flex:1;min-width:140px;background:var(--primary);color:#fff;border-radius:8px;padding:1rem;text-align:center}
  .metric .val{font-size:1.8rem;font-weight:700}
  .metric .label{font-size:.8rem;opacity:.85}
</style>
</head>
<body>
<header>
  <h1>Effective Training of Flow Policies for Boltzmann Distributions</h1>
  <p>Comparing five training methodologies for continuous normalizing flow policies in maximum entropy RL.</p>
</header>
<div class="container">
  <div class="metric-row">
    <div class="metric"><div class="val">0.964</div><div class="label">RFM Quality Score</div></div>
    <div class="metric"><div class="val">21.1%</div><div class="label">Improvement over Diffusion</div></div>
    <div class="metric"><div class="val">57</div><div class="label">RFM Convergence Iter</div></div>
    <div class="metric"><div class="val">0.930</div><div class="label">RFM ESS Ratio</div></div>
    <div class="metric"><div class="val">5</div><div class="label">Methods Compared</div></div>
  </div>
  <div class="grid">
    <div class="card">
      <h2>Method Comparison: Quality Scores</h2>
      <div class="chart-container"><canvas id="chartMethods"></canvas></div>
    </div>
    <div class="card">
      <h2>Quality Across Q-Function Types</h2>
      <div class="chart-container"><canvas id="chartQfunc"></canvas></div>
    </div>
    <div class="card">
      <h2>Dimension Scaling (Quality Score)</h2>
      <div class="chart-container"><canvas id="chartDim"></canvas></div>
    </div>
    <div class="card">
      <h2>Temperature Sensitivity</h2>
      <div class="chart-container"><canvas id="chartTemp"></canvas></div>
    </div>
    <div class="card">
      <h2>Convergence: Training Loss</h2>
      <div class="chart-container"><canvas id="chartConv"></canvas></div>
    </div>
    <div class="card">
      <h2>ESS Ratio Across Dimensions</h2>
      <div class="chart-container"><canvas id="chartESS"></canvas></div>
    </div>
  </div>
  <div class="card" style="margin-bottom:1.5rem">
    <h2>Method Comparison (Quadratic Q, d=8, alpha=1.0)</h2>
    <table>
      <thead><tr><th>Method</th><th>Quality</th><th>Energy Dist</th><th>MMD</th><th>ESS</th><th>Loss</th><th>Conv. Iter</th></tr></thead>
      <tbody>
        <tr><td>RFM</td><td><strong>0.9642</strong></td><td><strong>0.0508</strong></td><td><strong>0.0146</strong></td><td><strong>0.9298</strong></td><td><strong>0.0446</strong></td><td><strong>57</strong></td></tr>
        <tr><td>SFT</td><td>0.7966</td><td>0.4663</td><td>0.0746</td><td>0.5966</td><td>0.0840</td><td>101</td></tr>
        <tr><td>KL</td><td>0.7712</td><td>0.5070</td><td>0.0672</td><td>0.5758</td><td>0.1260</td><td>126</td></tr>
        <tr><td>VFM</td><td>0.8589</td><td>0.2919</td><td>0.0371</td><td>0.6970</td><td>0.0694</td><td>84</td></tr>
        <tr><td>Diffusion</td><td>0.7963</td><td>0.4013</td><td>0.0588</td><td>0.6589</td><td>0.0700</td><td>87</td></tr>
      </tbody>
    </table>
  </div>
  <div class="card">
    <h2>Temperature Sensitivity Table</h2>
    <table>
      <thead><tr><th>Method</th><th>a=0.1</th><th>a=0.5</th><th>a=1.0</th><th>a=2.0</th><th>a=5.0</th></tr></thead>
      <tbody>
        <tr><td>RFM</td><td><strong>0.919</strong></td><td><strong>0.986</strong></td><td><strong>0.978</strong></td><td><strong>0.941</strong></td><td><strong>0.938</strong></td></tr>
        <tr><td>SFT</td><td>0.752</td><td>0.777</td><td>0.808</td><td>0.841</td><td>0.782</td></tr>
        <tr><td>KL</td><td>0.726</td><td>0.703</td><td>0.794</td><td>0.751</td><td>0.719</td></tr>
        <tr><td>VFM</td><td>0.814</td><td>0.819</td><td>0.827</td><td>0.867</td><td>0.805</td></tr>
        <tr><td>Diffusion</td><td>0.751</td><td>0.824</td><td>0.857</td><td>0.847</td><td>0.780</td></tr>
      </tbody>
    </table>
  </div>
</div>
<script>
var C = {responsive:true,maintainAspectRatio:false,plugins:{legend:{labels:{font:{size:11}}}}};
var colors = {rfm:'#1a3a5c',sft:'#e74c3c',kl:'#27ae60',vfm:'#8e44ad',diff:'#2980b9'};

new Chart(document.getElementById('chartMethods'),{type:'bar',data:{labels:['RFM','SFT','KL','VFM','Diffusion'],datasets:[{label:'Quality Score',data:[0.9642,0.7966,0.7712,0.8589,0.7963],backgroundColor:['rgba(26,58,92,0.8)','rgba(231,76,60,0.8)','rgba(39,174,96,0.8)','rgba(142,68,173,0.8)','rgba(41,128,185,0.8)']},{label:'ESS Ratio',data:[0.9298,0.5966,0.5758,0.697,0.6589],backgroundColor:['rgba(26,58,92,0.4)','rgba(231,76,60,0.4)','rgba(39,174,96,0.4)','rgba(142,68,173,0.4)','rgba(41,128,185,0.4)']}]},options:{...C,scales:{y:{min:0,max:1,title:{display:true,text:'Score'}}}}});

new Chart(document.getElementById('chartQfunc'),{type:'bar',data:{labels:['Quadratic','Multimodal','Banana','Ring'],datasets:[{label:'RFM',data:[0.9642,0.9512,0.8685,0.9310],backgroundColor:'rgba(26,58,92,0.8)'},{label:'SFT',data:[0.7966,0.7808,0.7072,0.7786],backgroundColor:'rgba(231,76,60,0.7)'},{label:'KL',data:[0.7712,0.7161,0.6968,0.7268],backgroundColor:'rgba(39,174,96,0.7)'},{label:'VFM',data:[0.8589,0.7800,0.7591,0.8117],backgroundColor:'rgba(142,68,173,0.7)'},{label:'Diffusion',data:[0.7963,0.7967,0.7672,0.8133],backgroundColor:'rgba(41,128,185,0.7)'}]},options:{...C,scales:{y:{min:0.6,max:1,title:{display:true,text:'Quality Score'}}}}});

new Chart(document.getElementById('chartDim'),{type:'line',data:{labels:['d=2','d=4','d=8','d=16','d=32'],datasets:[{label:'RFM',data:[0.985,0.99,0.9776,0.931,0.9772],borderColor:colors.rfm,pointRadius:5,tension:.2},{label:'SFT',data:[0.8174,0.8128,0.8077,0.8309,0.821],borderColor:colors.sft,pointRadius:4,tension:.2},{label:'KL',data:[0.792,0.7379,0.7944,0.7401,0.7582],borderColor:colors.kl,pointRadius:4,tension:.2},{label:'VFM',data:[0.8797,0.8545,0.8269,0.857,0.8437],borderColor:colors.vfm,pointRadius:4,tension:.2},{label:'Diffusion',data:[0.8171,0.8596,0.8566,0.837,0.8196],borderColor:colors.diff,pointRadius:4,tension:.2}]},options:{...C,scales:{y:{min:0.7,max:1,title:{display:true,text:'Quality Score'}},x:{title:{display:true,text:'Action Dimensionality'}}}}});

new Chart(document.getElementById('chartTemp'),{type:'line',data:{labels:['0.1','0.5','1.0','2.0','5.0'],datasets:[{label:'RFM',data:[0.9192,0.9862,0.9776,0.9414,0.938],borderColor:colors.rfm,pointRadius:5,tension:.3},{label:'SFT',data:[0.7516,0.7774,0.8077,0.8413,0.7818],borderColor:colors.sft,pointRadius:4,tension:.3},{label:'KL',data:[0.7262,0.7025,0.7944,0.7505,0.719],borderColor:colors.kl,pointRadius:4,tension:.3},{label:'VFM',data:[0.8139,0.8191,0.8269,0.8674,0.8045],borderColor:colors.vfm,pointRadius:4,tension:.3},{label:'Diffusion',data:[0.7513,0.8242,0.8566,0.8474,0.7804],borderColor:colors.diff,pointRadius:4,tension:.3}]},options:{...C,scales:{y:{min:0.6,max:1,title:{display:true,text:'Quality Score'}},x:{title:{display:true,text:'Temperature (alpha)'}}}}});

var rfmL=[2.13,1.82,1.08,0.49,0.24,0.13,0.07,0.05,0.045,0.0446];
var sftL=[2.32,2.08,1.79,1.16,0.66,0.39,0.21,0.13,0.098,0.084];
var klL=[2.33,2.15,1.87,1.23,0.86,0.50,0.34,0.23,0.16,0.126];
var vfmL=[2.13,1.82,1.06,0.48,0.23,0.13,0.08,0.07,0.069,0.069];
var diffL=[1.53,1.35,0.90,0.47,0.27,0.15,0.10,0.08,0.072,0.070];
var iters=['0','100','200','300','400','500','600','700','800','1000'];
new Chart(document.getElementById('chartConv'),{type:'line',data:{labels:iters,datasets:[{label:'RFM',data:rfmL,borderColor:colors.rfm,tension:.3,pointRadius:3},{label:'SFT',data:sftL,borderColor:colors.sft,tension:.3,pointRadius:3},{label:'KL',data:klL,borderColor:colors.kl,tension:.3,pointRadius:3},{label:'VFM',data:vfmL,borderColor:colors.vfm,tension:.3,pointRadius:3},{label:'Diffusion',data:diffL,borderColor:colors.diff,tension:.3,pointRadius:3}]},options:{...C,scales:{y:{title:{display:true,text:'Training Loss'}},x:{title:{display:true,text:'Iteration'}}}}});

new Chart(document.getElementById('chartESS'),{type:'line',data:{labels:['d=2','d=4','d=8','d=16','d=32'],datasets:[{label:'RFM',data:[0.9703,0.971,0.9297,0.8666,0.9623],borderColor:colors.rfm,backgroundColor:'rgba(26,58,92,0.1)',fill:true,tension:.3,pointRadius:5},{label:'VFM',data:[0.7332,0.702,0.6997,0.7217,0.6883],borderColor:colors.vfm,tension:.3,pointRadius:4},{label:'Diffusion',data:[0.6924,0.7146,0.7108,0.6566,0.7043],borderColor:colors.diff,tension:.3,pointRadius:4},{label:'SFT',data:[0.6302,0.6645,0.6318,0.696,0.6417],borderColor:colors.sft,tension:.3,pointRadius:4},{label:'KL',data:[0.6083,0.4575,0.5996,0.5891,0.5727],borderColor:colors.kl,tension:.3,pointRadius:4}]},options:{...C,scales:{y:{min:0.3,max:1,title:{display:true,text:'ESS Ratio'}},x:{title:{display:true,text:'Action Dimensionality'}}}}});
</script>
</body>
</html>
