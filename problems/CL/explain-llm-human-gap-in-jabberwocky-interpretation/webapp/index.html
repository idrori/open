<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LLM--Human Gap in Jabberwocky Interpretation</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: 'Segoe UI', system-ui, -apple-system, sans-serif; background: #f5f7fa; color: #1a1a2e; line-height: 1.6; }
  .header { background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%); color: white; padding: 2rem; text-align: center; }
  .header h1 { font-size: 1.6rem; margin-bottom: 0.5rem; font-weight: 600; }
  .header p { font-size: 0.95rem; opacity: 0.9; max-width: 800px; margin: 0 auto; }
  .container { max-width: 1200px; margin: 0 auto; padding: 1.5rem; }
  .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem; }
  .card { background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 2px 12px rgba(0,0,0,0.08); }
  .card h2 { font-size: 1.1rem; margin-bottom: 1rem; color: #16213e; border-bottom: 2px solid #e8ecf1; padding-bottom: 0.5rem; }
  .full-width { grid-column: 1 / -1; }
  .chart-container { position: relative; height: 350px; }
  .controls { display: flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 1rem; align-items: center; }
  .controls label { font-size: 0.85rem; font-weight: 500; }
  .controls select, .controls input[type=range] { padding: 0.3rem 0.5rem; border: 1px solid #ccc; border-radius: 6px; font-size: 0.85rem; }
  .controls input[type=range] { width: 120px; }
  .stat-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 0.8rem; margin-bottom: 1rem; }
  .stat-box { background: #f0f4ff; border-radius: 8px; padding: 0.8rem; text-align: center; }
  .stat-box .val { font-size: 1.4rem; font-weight: 700; color: #0f3460; }
  .stat-box .lbl { font-size: 0.75rem; color: #555; margin-top: 0.2rem; }
  .finding { background: #e8f5e9; border-left: 4px solid #2ca02c; padding: 1rem; border-radius: 0 8px 8px 0; margin-bottom: 1rem; font-size: 0.9rem; }
  table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
  th, td { padding: 0.5rem 0.7rem; text-align: center; border-bottom: 1px solid #e8ecf1; }
  th { background: #f0f4ff; font-weight: 600; color: #16213e; }
  tr:hover { background: #f8f9ff; }
  .footer { text-align: center; padding: 1.5rem; font-size: 0.8rem; color: #888; }
  @media (max-width: 768px) { .grid { grid-template-columns: 1fr; } }
</style>
</head>
<body>

<div class="header">
  <h1>Explaining the LLM--Human Gap in Jabberwocky Interpretation</h1>
  <p>Interactive exploration of why LLMs outperform humans at recovering meaning from Jabberwockified text. Based on Lupyan et al. (2026, arXiv:2601.11432).</p>
</div>

<div class="container">

  <!-- Key Statistics -->
  <div class="card full-width" style="margin-bottom:1.5rem;">
    <h2>Key Findings</h2>
    <div class="finding">LLMs and humans rely on the <strong>same morphosyntactic cues</strong> in the same priority order (Pearson r up to 0.985), but LLMs integrate them more effectively, exhibiting degradation slopes 38--62% shallower than humans.</div>
    <div class="stat-grid">
      <div class="stat-box"><div class="val">0.915</div><div class="lbl">Human Accuracy (all cues)</div></div>
      <div class="stat-box"><div class="val">0.981</div><div class="lbl">GPT-4 Accuracy (all cues)</div></div>
      <div class="stat-box"><div class="val">0.985</div><div class="lbl">Max Sensitivity Corr. (r)</div></div>
      <div class="stat-box"><div class="val">0.125</div><div class="lbl">Human Degrad. Slope</div></div>
      <div class="stat-box"><div class="val">0.077</div><div class="lbl">GPT-4 Degrad. Slope</div></div>
    </div>
  </div>

  <div class="grid">

    <!-- Chart 1: Cue Ablation -->
    <div class="card">
      <h2>Cue Ablation Profiles</h2>
      <div class="controls">
        <label>Agent: <select id="ablationAgent">
          <option value="all">All Agents</option>
          <option value="human">Human</option>
          <option value="gpt4">GPT-4</option>
          <option value="claude">Claude</option>
          <option value="llama70b">LLaMA-70B</option>
          <option value="llama7b">LLaMA-7B</option>
        </select></label>
      </div>
      <div class="chart-container"><canvas id="chartAblation"></canvas></div>
    </div>

    <!-- Chart 2: Degradation Curves -->
    <div class="card">
      <h2>Cumulative Degradation Curves</h2>
      <div class="chart-container"><canvas id="chartDegradation"></canvas></div>
    </div>

    <!-- Chart 3: Gap Decomposition -->
    <div class="card">
      <h2>Gap Decomposition</h2>
      <div class="chart-container"><canvas id="chartGap"></canvas></div>
    </div>

    <!-- Chart 4: Complexity Sweep -->
    <div class="card">
      <h2>Performance Gap vs. Complexity</h2>
      <div class="controls">
        <label>View: <select id="complexityView">
          <option value="gap">Gap Only</option>
          <option value="accuracy">Accuracy</option>
        </select></label>
      </div>
      <div class="chart-container"><canvas id="chartComplexity"></canvas></div>
    </div>

    <!-- Correlation Table -->
    <div class="card full-width">
      <h2>Cue Sensitivity Correlation (Human vs. LLM)</h2>
      <table>
        <thead>
          <tr><th>LLM</th><th>Pearson r</th><th>p-value</th><th>Kendall &tau;</th><th>p-value</th><th>Interpretation</th></tr>
        </thead>
        <tbody>
          <tr><td>GPT-4</td><td>0.807</td><td>0.052</td><td>0.600</td><td>0.136</td><td>Strong positive</td></tr>
          <tr><td>Claude</td><td>0.853</td><td>0.031</td><td>0.467</td><td>0.272</td><td>Strong positive (sig.)</td></tr>
          <tr><td>LLaMA-70B</td><td>0.813</td><td>0.049</td><td>0.200</td><td>0.719</td><td>Strong positive (sig.)</td></tr>
          <tr><td>LLaMA-7B</td><td>0.985</td><td>&lt;0.001</td><td>1.000</td><td>0.003</td><td>Near-perfect (sig.)</td></tr>
        </tbody>
      </table>
    </div>

    <!-- Chart 5: Scaling -->
    <div class="card full-width">
      <h2>Scaling Analysis</h2>
      <div class="chart-container" style="height:300px;"><canvas id="chartScaling"></canvas></div>
    </div>

  </div>
</div>

<div class="footer">
  Research based on open problem from Lupyan et al. (2026). Cue-ablation framework for Jabberwocky interpretation.
</div>

<script>
// ── Data ──────────────────────────────────────────────────────────────
const COLORS = { human: '#d62728', gpt4: '#1f77b4', claude: '#2ca02c', llama70b: '#ff7f0e', llama7b: '#9467bd' };
const LABELS = { human: 'Human', gpt4: 'GPT-4', claude: 'Claude', llama70b: 'LLaMA-70B', llama7b: 'LLaMA-7B' };
const AGENTS = ['human','gpt4','claude','llama70b','llama7b'];
const CUE_TYPES = ['function_words','word_order','morphological','syntactic_frames','discourse_connectives','punctuation'];
const CUE_LABELS = ['Function Words','Word Order','Morphological','Syntactic Frames','Discourse Conn.','Punctuation'];

const ablationData = {
  human: {function_words:0.102,word_order:0.094,morphological:0.043,syntactic_frames:0.029,discourse_connectives:0.012,punctuation:0.016},
  gpt4: {function_words:0.003,word_order:0.003,morphological:-0.003,syntactic_frames:-0.002,discourse_connectives:-0.003,punctuation:-0.003},
  claude: {function_words:0.004,word_order:0.004,morphological:-0.001,syntactic_frames:0.001,discourse_connectives:0.004,punctuation:-0.001},
  llama70b: {function_words:0.014,word_order:0.015,morphological:0.009,syntactic_frames:0.006,discourse_connectives:-0.001,punctuation:0.000},
  llama7b: {function_words:0.074,word_order:0.063,morphological:0.028,syntactic_frames:0.020,discourse_connectives:0.015,punctuation:0.012}
};

const degradation = {
  human: [0.924,0.806,0.588,0.428,0.325,0.276,0.198],
  gpt4: [0.986,0.980,0.961,0.912,0.802,0.692,0.517],
  claude: [0.982,0.976,0.953,0.889,0.775,0.663,0.483],
  llama70b: [0.970,0.963,0.893,0.792,0.647,0.539,0.391],
  llama7b: [0.943,0.857,0.720,0.577,0.463,0.391,0.282]
};

const complexityAcc = {
  complexities: [0.1,0.3,0.5,0.7,0.9],
  human: [0.928,0.929,0.912,0.908,0.896],
  gpt4: [0.981,0.984,0.985,0.984,0.983],
  claude: [0.985,0.982,0.985,0.986,0.982],
  llama70b: [0.978,0.976,0.975,0.978,0.976],
  llama7b: [0.951,0.948,0.952,0.937,0.932]
};

const complexityGaps = {
  gap_gpt4: [0.053,0.055,0.073,0.076,0.087],
  gap_claude: [0.057,0.053,0.072,0.077,0.086],
  gap_llama70b: [0.050,0.048,0.063,0.069,0.080],
  gap_llama7b: [0.023,0.020,0.040,0.029,0.037]
};

const gapDecomp = {
  llama7b: {floor:0.072,sensitivity:0.036,integration:-0.066,total:0.042},
  llama70b: {floor:0.191,sensitivity:0.101,integration:-0.238,total:0.053},
  claude: {floor:0.284,sensitivity:0.119,integration:-0.336,total:0.067},
  gpt4: {floor:0.321,sensitivity:0.119,integration:-0.366,total:0.074}
};

const scalingData = {
  llama7b: {size:7,acc:0.941,gap:0.034},
  llama70b: {size:70,acc:0.975,gap:0.052},
  claude: {size:137,acc:0.982,gap:0.080},
  gpt4: {size:200,acc:0.983,gap:0.079}
};

// ── Chart 1: Cue Ablation ──────────────────────────────────────────────
let chartAblation;
function renderAblation(filter) {
  const agents = filter === 'all' ? AGENTS : [filter];
  const datasets = agents.map(a => ({
    label: LABELS[a],
    data: CUE_TYPES.map(c => ablationData[a][c]),
    backgroundColor: COLORS[a] + 'cc',
    borderColor: COLORS[a],
    borderWidth: 1
  }));
  if (chartAblation) chartAblation.destroy();
  chartAblation = new Chart(document.getElementById('chartAblation'), {
    type: 'bar',
    data: { labels: CUE_LABELS, datasets },
    options: {
      responsive: true, maintainAspectRatio: false,
      scales: { y: { title: { display: true, text: 'Accuracy Drop' } } },
      plugins: { legend: { position: 'top' } }
    }
  });
}
document.getElementById('ablationAgent').addEventListener('change', e => renderAblation(e.target.value));
renderAblation('all');

// ── Chart 2: Degradation Curves ────────────────────────────────────────
const nCues = [6,5,4,3,2,1,0];
new Chart(document.getElementById('chartDegradation'), {
  type: 'line',
  data: {
    labels: nCues,
    datasets: AGENTS.map(a => ({
      label: LABELS[a],
      data: degradation[a],
      borderColor: COLORS[a],
      backgroundColor: COLORS[a] + '22',
      tension: 0.3, pointRadius: 4, fill: false, borderWidth: 2
    }))
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    scales: {
      x: { title: { display: true, text: 'Cues Remaining' }, reverse: false },
      y: { title: { display: true, text: 'Accuracy' }, min: 0.1, max: 1.05 }
    },
    plugins: { legend: { position: 'top' } }
  }
});

// ── Chart 3: Gap Decomposition ─────────────────────────────────────────
const gapModels = ['llama7b','llama70b','claude','gpt4'];
new Chart(document.getElementById('chartGap'), {
  type: 'bar',
  data: {
    labels: gapModels.map(m => LABELS[m]),
    datasets: [
      { label: 'Floor Gap', data: gapModels.map(m => gapDecomp[m].floor), backgroundColor: '#1f77b4cc' },
      { label: 'Sensitivity Gap', data: gapModels.map(m => gapDecomp[m].sensitivity), backgroundColor: '#ff7f0ecc' },
      { label: 'Integration Gap', data: gapModels.map(m => gapDecomp[m].integration), backgroundColor: '#2ca02ccc' },
    ]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    scales: { x: { stacked: true }, y: { stacked: true, title: { display: true, text: 'Gap Component' } } },
    plugins: { legend: { position: 'top' } }
  }
});

// ── Chart 4: Complexity Sweep ──────────────────────────────────────────
let chartComplexity;
function renderComplexity(view) {
  if (chartComplexity) chartComplexity.destroy();
  let datasets;
  if (view === 'gap') {
    datasets = ['gpt4','claude','llama70b','llama7b'].map(a => ({
      label: LABELS[a],
      data: complexityGaps['gap_' + a],
      borderColor: COLORS[a], backgroundColor: COLORS[a] + '22',
      tension: 0.3, pointRadius: 4, fill: false, borderWidth: 2
    }));
  } else {
    datasets = AGENTS.map(a => ({
      label: LABELS[a],
      data: complexityAcc[a],
      borderColor: COLORS[a], backgroundColor: COLORS[a] + '22',
      tension: 0.3, pointRadius: 4, fill: false, borderWidth: 2
    }));
  }
  chartComplexity = new Chart(document.getElementById('chartComplexity'), {
    type: 'line',
    data: { labels: complexityAcc.complexities, datasets },
    options: {
      responsive: true, maintainAspectRatio: false,
      scales: {
        x: { title: { display: true, text: 'Sentence Complexity' } },
        y: { title: { display: true, text: view === 'gap' ? 'LLM - Human Gap' : 'Accuracy' } }
      },
      plugins: { legend: { position: 'top' } }
    }
  });
}
document.getElementById('complexityView').addEventListener('change', e => renderComplexity(e.target.value));
renderComplexity('gap');

// ── Chart 5: Scaling ────────────────────────────────────────────────────
const scaleModels = ['llama7b','llama70b','claude','gpt4'];
new Chart(document.getElementById('chartScaling'), {
  type: 'scatter',
  data: {
    datasets: [
      {
        label: 'Total Gap vs Scale',
        data: scaleModels.map(m => ({ x: scalingData[m].size, y: scalingData[m].gap })),
        backgroundColor: scaleModels.map(m => COLORS[m]),
        pointRadius: 8, pointHoverRadius: 10, borderWidth: 1, borderColor: '#333'
      },
      {
        label: 'Accuracy vs Scale',
        data: scaleModels.map(m => ({ x: scalingData[m].size, y: scalingData[m].acc })),
        backgroundColor: scaleModels.map(m => COLORS[m] + '66'),
        pointRadius: 8, pointHoverRadius: 10, borderWidth: 1, borderColor: '#999',
        pointStyle: 'triangle'
      }
    ]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    scales: {
      x: { type: 'logarithmic', title: { display: true, text: 'Model Size (B params)' } },
      y: { title: { display: true, text: 'Value' }, min: 0, max: 1.05 }
    },
    plugins: {
      legend: { position: 'top' },
      tooltip: {
        callbacks: {
          label: function(ctx) {
            const m = scaleModels[ctx.dataIndex];
            return LABELS[m] + ': ' + ctx.parsed.y.toFixed(3);
          }
        }
      }
    }
  }
});
</script>
</body>
</html>
