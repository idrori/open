<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Effect of Alignment on Non-Numeric LLM-as-a-Judge Evaluations</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Segoe UI',system-ui,-apple-system,sans-serif;background:#0f172a;color:#e2e8f0;line-height:1.6}
.container{max-width:1300px;margin:0 auto;padding:20px}
header{text-align:center;padding:40px 20px;background:linear-gradient(135deg,#1e293b 0%,#0f172a 100%);border-bottom:2px solid #334155}
h1{font-size:1.8rem;color:#f8fafc;margin-bottom:10px}
.subtitle{color:#94a3b8;font-size:1rem;max-width:900px;margin:0 auto}
.section{margin:30px 0;padding:25px;background:#1e293b;border-radius:12px;border:1px solid #334155}
.section h2{color:#38bdf8;font-size:1.3rem;margin-bottom:15px;border-bottom:1px solid #334155;padding-bottom:10px}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:20px}
.grid3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:20px}
.chart-box{background:#0f172a;border-radius:8px;padding:15px;border:1px solid #334155}
.chart-box h3{color:#e2e8f0;font-size:0.95rem;margin-bottom:10px;text-align:center}
canvas{max-height:320px}
.tabs{display:flex;gap:8px;margin-bottom:15px;flex-wrap:wrap}
.tab{padding:8px 16px;background:#334155;color:#e2e8f0;border:none;border-radius:6px;cursor:pointer;font-size:0.85rem;transition:all 0.2s}
.tab:hover,.tab.active{background:#38bdf8;color:#0f172a}
table{width:100%;border-collapse:collapse;font-size:0.85rem}
th,td{padding:8px 12px;text-align:center;border-bottom:1px solid #334155}
th{background:#334155;color:#38bdf8;font-weight:600}
tr:hover{background:#1a2744}
.key-result{display:inline-block;background:#164e63;color:#67e8f9;padding:4px 12px;border-radius:20px;font-size:0.8rem;margin:3px}
.hypothesis{padding:12px 16px;background:#1a2744;border-left:3px solid #38bdf8;margin:8px 0;border-radius:0 6px 6px 0;font-size:0.9rem}
@media(max-width:768px){.grid2,.grid3{grid-template-columns:1fr}h1{font-size:1.3rem}}
</style>
</head>
<body>
<header>
<h1>Effect of Alignment on Non-Numeric LLM-as-a-Judge Evaluations</h1>
<p class="subtitle">Label Concentration, Ranking Flattening, and Format-Aware Calibration. Investigating how alignment (instruction tuning and preference tuning) distorts categorical labels, pairwise preferences, and rankings in LLM-as-a-judge evaluations.</p>
</header>
<div class="container">

<div class="section">
<h2>Problem Statement &amp; Hypotheses</h2>
<p style="margin-bottom:12px;color:#94a3b8">Sato et al. (2026) showed alignment causes numerical score concentration in LLM judges. This work extends the analysis to non-numeric formats (categorical labels, pairwise preferences, rankings) across three alignment stages: Base, Instruction-Tuned (IT), and IT + Preference-Tuned (IT+PT).</p>
<div class="hypothesis"><strong>H1 (Label Concentration):</strong> Alignment compresses categorical label distributions toward middle/positive labels, reducing entropy.</div>
<div class="hypothesis"><strong>H2 (Ranking Flattening):</strong> Preference tuning degrades ranking quality by reducing discriminability between adjacent items.</div>
<div class="hypothesis"><strong>H3 (Format-Dependent Severity):</strong> Pairwise preferences are more robust to alignment distortion than categorical or ranking formats.</div>
</div>

<div class="section">
<h2>H1: Categorical Label Distributions Across Alignment Stages</h2>
<div class="tabs" id="distTabs">
<button class="tab active" onclick="switchDist('uniform')">Uniform</button>
<button class="tab" onclick="switchDist('realistic')">Realistic</button>
<button class="tab" onclick="switchDist('bimodal')">Bimodal</button>
</div>
<div class="grid2">
<div class="chart-box"><h3>Label Distribution by Alignment Stage</h3><canvas id="labelDistChart"></canvas></div>
<div class="chart-box"><h3>Entropy Across Stages</h3><canvas id="entropyChart"></canvas></div>
</div>
<table style="margin-top:15px">
<tr><th>Distribution</th><th>Stage</th><th>Entropy</th><th>Entropy Drop</th><th>JS Divergence</th><th>Accuracy</th></tr>
<tr><td rowspan="3">Uniform</td><td>Base</td><td>2.321</td><td>0.000</td><td>0.0001</td><td>0.782</td></tr>
<tr><td>IT</td><td>2.313</td><td>0.008</td><td>0.0014</td><td>0.810</td></tr>
<tr><td>IT+PT</td><td>2.263</td><td>0.058</td><td>0.0101</td><td>0.765</td></tr>
<tr><td rowspan="3">Realistic</td><td>Base</td><td>2.180</td><td>-0.164</td><td>0.0080</td><td>0.787</td></tr>
<tr><td>IT</td><td>2.073</td><td>-0.057</td><td>0.0023</td><td>0.843</td></tr>
<tr><td>IT+PT</td><td>1.987</td><td>0.029</td><td>0.0011</td><td>0.858</td></tr>
<tr><td rowspan="3">Bimodal</td><td>Base</td><td>2.286</td><td>-0.032</td><td>0.0010</td><td>0.768</td></tr>
<tr><td>IT</td><td>2.267</td><td>-0.014</td><td>0.0015</td><td>0.793</td></tr>
<tr><td>IT+PT</td><td>2.220</td><td>0.034</td><td>0.0053</td><td>0.803</td></tr>
</table>
</div>

<div class="section">
<h2>H2: Ranking Flattening &amp; Pairwise Preference Distortions</h2>
<div class="grid2">
<div class="chart-box"><h3>Mean Kendall Tau by Alignment Stage</h3><canvas id="rankingChart"></canvas></div>
<div class="chart-box"><h3>Pairwise Metrics Across Stages</h3><canvas id="pairwiseChart"></canvas></div>
</div>
<div class="grid3" style="margin-top:15px">
<div style="text-align:center">
<div class="key-result">Base tau: 0.150</div>
<div class="key-result">IT tau: 0.419</div>
<div class="key-result">IT+PT tau: 0.232</div>
</div>
<div style="text-align:center">
<div class="key-result">IT+PT tie inflation: +0.190</div>
<div class="key-result">IT+PT position bias: 0.205</div>
</div>
<div style="text-align:center">
<div class="key-result">IT accuracy peak: 0.657</div>
<div class="key-result">IT+PT accuracy: 0.567</div>
</div>
</div>
</div>

<div class="section">
<h2>H3: Cross-Format Distortion Comparison</h2>
<div class="grid2">
<div class="chart-box"><h3>Normalized Distortion by Format &amp; Stage</h3><canvas id="crossFormatChart"></canvas></div>
<div class="chart-box"><h3>Distortion Change: Base to IT+PT</h3><canvas id="distortionChangeChart"></canvas></div>
</div>
</div>

<div class="section">
<h2>Calibration Results (IT+PT Stage)</h2>
<div class="grid2">
<div class="chart-box"><h3>Pairwise: Tie Inflation Before/After Calibration</h3><canvas id="calibTieChart"></canvas></div>
<div class="chart-box"><h3>Calibration Effect on Accuracy</h3><canvas id="calibAccChart"></canvas></div>
</div>
<div style="margin-top:12px;text-align:center">
<div class="key-result">Tie inflation: +0.213 -> -0.006</div>
<div class="key-result">Categorical JS unchanged: 0.0015</div>
<div class="key-result">Pairwise accuracy: 0.575 -> 0.558</div>
</div>
</div>

<div class="section">
<h2>Key Results &amp; Recommendations</h2>
<div class="grid2">
<div>
<h3 style="color:#38bdf8;margin-bottom:10px">Confirmed Hypotheses</h3>
<ul style="padding-left:20px;color:#94a3b8">
<li>H1: Entropy drops 0.034-0.058 bits from Base to IT+PT. JS divergence increases up to 100x.</li>
<li>H2: Kendall tau degrades from 0.419 (IT) to 0.232 (IT+PT) -- a 45% relative loss of IT gains.</li>
<li>H3: Preference tuning increases pairwise error +0.091 and ranking distortion +0.093 from IT to IT+PT.</li>
</ul>
</div>
<div>
<h3 style="color:#38bdf8;margin-bottom:10px">Practical Recommendations</h3>
<ul style="padding-left:20px;color:#94a3b8">
<li>Monitor label entropy as a real-time diagnostic for concentration bias.</li>
<li>For ranking tasks, prefer IT-only over IT+PT models.</li>
<li>Apply tie redistribution calibration when tie rates exceed expected by more than 5%.</li>
<li>A small calibration set (~40%) with gold labels suffices for bias correction.</li>
</ul>
</div>
</div>
</div>
</div>

<script>
const DATA = {
  categorical: {
    uniform: {
      gt: [0.204,0.191,0.203,0.196,0.207],
      base: [0.209,0.195,0.193,0.198,0.206],
      it: [0.174,0.173,0.220,0.224,0.210],
      it_pt: [0.135,0.139,0.227,0.284,0.215],
      gt_ent: 2.321, base_ent: 2.321, it_ent: 2.313, itpt_ent: 2.263
    },
    realistic: {
      gt: [0.024,0.117,0.270,0.362,0.228],
      base: [0.071,0.142,0.251,0.308,0.229],
      it: [0.047,0.118,0.259,0.372,0.205],
      it_pt: [0.028,0.095,0.253,0.391,0.234],
      gt_ent: 2.016, base_ent: 2.180, it_ent: 2.073, itpt_ent: 1.987
    },
    bimodal: {
      gt: [0.115,0.272,0.145,0.238,0.231],
      base: [0.135,0.253,0.163,0.227,0.224],
      it: [0.112,0.234,0.170,0.258,0.227],
      it_pt: [0.093,0.209,0.156,0.312,0.231],
      gt_ent: 2.254, base_ent: 2.286, it_ent: 2.267, itpt_ent: 2.220
    }
  },
  pairwise: {
    stages: ['Base','IT','IT+PT'],
    accuracy: [0.529,0.657,0.567],
    tie_rate: [0.321,0.320,0.397],
    tie_inflation: [0.115,0.113,0.190],
    pos_bias: [0.204,0.182,0.205]
  },
  ranking: { mean_tau: [0.150,0.419,0.232], std_tau: [0.471,0.499,0.495], entropy: [2.312,2.315,2.316] },
  cross_format: {
    stages: ['Base','IT','IT+PT'],
    categorical: [0.00803,0.00235,0.00107],
    pairwise: [0.472,0.343,0.434],
    ranking: [0.425,0.291,0.384]
  },
  calibration: {
    pairwise_pre: {acc:0.575,tie_infl:0.213},
    pairwise_post: {acc:0.558,tie_infl:-0.006}
  }
};
const labels5 = ['Terrible','Poor','Acceptable','Good','Excellent'];
const stageColors = {gt:'rgba(156,163,175,0.7)',base:'rgba(59,130,246,0.7)',it:'rgba(34,197,94,0.7)',it_pt:'rgba(239,68,68,0.7)'};
let currentDist = 'uniform';
let labelDistChart, entropyChart;

function createLabelDistChart(dist) {
  const d = DATA.categorical[dist];
  const ctx = document.getElementById('labelDistChart').getContext('2d');
  if(labelDistChart) labelDistChart.destroy();
  labelDistChart = new Chart(ctx, {
    type:'bar', data:{
      labels: labels5,
      datasets:[
        {label:'Ground Truth',data:d.gt,backgroundColor:stageColors.gt},
        {label:'Base',data:d.base,backgroundColor:stageColors.base},
        {label:'IT',data:d.it,backgroundColor:stageColors.it},
        {label:'IT+PT',data:d.it_pt,backgroundColor:stageColors.it_pt}
      ]
    }, options:{responsive:true,plugins:{legend:{labels:{color:'#e2e8f0'}}},scales:{x:{ticks:{color:'#94a3b8'}},y:{ticks:{color:'#94a3b8'},title:{display:true,text:'Proportion',color:'#94a3b8'}}}}
  });
}
function createEntropyChart(dist) {
  const d = DATA.categorical[dist];
  const ctx = document.getElementById('entropyChart').getContext('2d');
  if(entropyChart) entropyChart.destroy();
  entropyChart = new Chart(ctx, {
    type:'bar', data:{
      labels:['Base','IT','IT+PT'],
      datasets:[{label:'Shannon Entropy (bits)',data:[d.base_ent,d.it_ent,d.itpt_ent],backgroundColor:['rgba(59,130,246,0.7)','rgba(34,197,94,0.7)','rgba(239,68,68,0.7)']}]
    }, options:{responsive:true,plugins:{legend:{labels:{color:'#e2e8f0'}},annotation:{}},scales:{x:{ticks:{color:'#94a3b8'}},y:{min:Math.min(d.gt_ent,d.itpt_ent)-0.1,ticks:{color:'#94a3b8'},title:{display:true,text:'Entropy (bits)',color:'#94a3b8'}}}}
  });
}
function switchDist(dist) {
  currentDist = dist;
  document.querySelectorAll('#distTabs .tab').forEach(t => t.classList.remove('active'));
  event.target.classList.add('active');
  createLabelDistChart(dist);
  createEntropyChart(dist);
}

// Ranking chart
new Chart(document.getElementById('rankingChart').getContext('2d'), {
  type:'bar', data:{
    labels:['Base','IT','IT+PT'],
    datasets:[{label:'Mean Kendall Tau',data:DATA.ranking.mean_tau,backgroundColor:['rgba(59,130,246,0.7)','rgba(34,197,94,0.7)','rgba(239,68,68,0.7)']}]
  }, options:{responsive:true,plugins:{legend:{labels:{color:'#e2e8f0'}}},scales:{x:{ticks:{color:'#94a3b8'}},y:{min:0,max:0.5,ticks:{color:'#94a3b8'},title:{display:true,text:'Kendall Tau',color:'#94a3b8'}}}}
});

// Pairwise chart
new Chart(document.getElementById('pairwiseChart').getContext('2d'), {
  type:'bar', data:{
    labels:['Base','IT','IT+PT'],
    datasets:[
      {label:'Accuracy',data:DATA.pairwise.accuracy,backgroundColor:'rgba(59,130,246,0.7)'},
      {label:'Tie Rate',data:DATA.pairwise.tie_rate,backgroundColor:'rgba(234,179,8,0.7)'},
      {label:'Position Bias',data:DATA.pairwise.pos_bias,backgroundColor:'rgba(168,85,247,0.7)'}
    ]
  }, options:{responsive:true,plugins:{legend:{labels:{color:'#e2e8f0'}}},scales:{x:{ticks:{color:'#94a3b8'}},y:{ticks:{color:'#94a3b8'}}}}
});

// Cross-format chart
new Chart(document.getElementById('crossFormatChart').getContext('2d'), {
  type:'bar', data:{
    labels:['Base','IT','IT+PT'],
    datasets:[
      {label:'Categorical (JS Div x100)',data:DATA.cross_format.categorical.map(v=>v*100),backgroundColor:'rgba(59,130,246,0.7)'},
      {label:'Pairwise (Error Rate)',data:DATA.cross_format.pairwise,backgroundColor:'rgba(234,179,8,0.7)'},
      {label:'Ranking (Norm. Tau)',data:DATA.cross_format.ranking,backgroundColor:'rgba(239,68,68,0.7)'}
    ]
  }, options:{responsive:true,plugins:{legend:{labels:{color:'#e2e8f0'}}},scales:{x:{ticks:{color:'#94a3b8'}},y:{ticks:{color:'#94a3b8'},title:{display:true,text:'Distortion Score',color:'#94a3b8'}}}}
});

// Distortion change
const cf = DATA.cross_format;
new Chart(document.getElementById('distortionChangeChart').getContext('2d'), {
  type:'bar', data:{
    labels:['Categorical (JS x100)','Pairwise','Ranking'],
    datasets:[{label:'Change Base->IT+PT',data:[(cf.categorical[2]-cf.categorical[0])*100,cf.pairwise[2]-cf.pairwise[0],cf.ranking[2]-cf.ranking[0]],backgroundColor:['rgba(34,197,94,0.7)','rgba(234,179,8,0.7)','rgba(239,68,68,0.7)']}]
  }, options:{responsive:true,plugins:{legend:{labels:{color:'#e2e8f0'}}},scales:{x:{ticks:{color:'#94a3b8'}},y:{ticks:{color:'#94a3b8'},title:{display:true,text:'Distortion Change',color:'#94a3b8'}}}}
});

// Calibration charts
new Chart(document.getElementById('calibTieChart').getContext('2d'), {
  type:'bar', data:{
    labels:['Uncalibrated','Calibrated'],
    datasets:[{label:'Tie Inflation',data:[DATA.calibration.pairwise_pre.tie_infl,DATA.calibration.pairwise_post.tie_infl],backgroundColor:['rgba(239,68,68,0.7)','rgba(34,197,94,0.7)']}]
  }, options:{responsive:true,plugins:{legend:{labels:{color:'#e2e8f0'}}},scales:{x:{ticks:{color:'#94a3b8'}},y:{ticks:{color:'#94a3b8'},title:{display:true,text:'Tie Inflation',color:'#94a3b8'}}}}
});
new Chart(document.getElementById('calibAccChart').getContext('2d'), {
  type:'bar', data:{
    labels:['Uncalibrated','Calibrated'],
    datasets:[{label:'Accuracy',data:[DATA.calibration.pairwise_pre.acc,DATA.calibration.pairwise_post.acc],backgroundColor:['rgba(239,68,68,0.7)','rgba(34,197,94,0.7)']}]
  }, options:{responsive:true,plugins:{legend:{labels:{color:'#e2e8f0'}}},scales:{x:{ticks:{color:'#94a3b8'}},y:{min:0.5,max:0.6,ticks:{color:'#94a3b8'},title:{display:true,text:'Accuracy',color:'#94a3b8'}}}}
});

createLabelDistChart('uniform');
createEntropyChart('uniform');
</script>
</body>
</html>
