<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lattice Theta Function: Computation and Complexity</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7"></script>
<style>
:root {
    --primary: #1a3a5c;
    --primary-light: #2c5a8a;
    --accent: #2980b9;
    --accent-light: #3498db;
    --bg: #f8f9fa;
    --bg-card: #ffffff;
    --text: #2c3e50;
    --text-light: #6c757d;
    --border: #dee2e6;
    --success: #27ae60;
    --warning: #f39c12;
    --danger: #e74c3c;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    background: var(--bg);
    color: var(--text);
    line-height: 1.6;
}

.hero {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 50%, var(--accent) 100%);
    color: white;
    padding: 60px 20px 50px;
    text-align: center;
}

.hero h1 {
    font-size: 2.2rem;
    font-weight: 700;
    margin-bottom: 16px;
    max-width: 900px;
    margin-left: auto;
    margin-right: auto;
}

.hero .subtitle {
    font-size: 1.1rem;
    opacity: 0.9;
    max-width: 750px;
    margin: 0 auto 24px;
}

.hero .equation {
    font-family: 'Times New Roman', serif;
    font-size: 1.3rem;
    background: rgba(255,255,255,0.12);
    display: inline-block;
    padding: 12px 28px;
    border-radius: 8px;
    margin-top: 8px;
    letter-spacing: 0.5px;
}

.hero .badges {
    margin-top: 20px;
    display: flex;
    justify-content: center;
    gap: 12px;
    flex-wrap: wrap;
}

.badge {
    display: inline-block;
    padding: 6px 16px;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 600;
}

.badge-primary { background: rgba(255,255,255,0.2); color: white; }
.badge-accent { background: var(--accent-light); color: white; }

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}

.section {
    padding: 48px 0;
}

.section-title {
    font-size: 1.6rem;
    font-weight: 700;
    color: var(--primary);
    margin-bottom: 8px;
}

.section-subtitle {
    color: var(--text-light);
    margin-bottom: 32px;
    font-size: 1rem;
}

.grid-2 {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 24px;
}

.grid-3 {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 24px;
}

.card {
    background: var(--bg-card);
    border-radius: 12px;
    padding: 24px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    border: 1px solid var(--border);
}

.card-title {
    font-size: 1.05rem;
    font-weight: 600;
    color: var(--primary);
    margin-bottom: 16px;
}

.chart-container {
    position: relative;
    width: 100%;
    height: 320px;
}

.stat-card {
    text-align: center;
    padding: 28px 20px;
}

.stat-value {
    font-size: 2.2rem;
    font-weight: 700;
    color: var(--accent);
}

.stat-label {
    font-size: 0.9rem;
    color: var(--text-light);
    margin-top: 4px;
}

.stat-detail {
    font-size: 0.8rem;
    color: var(--text-light);
    margin-top: 8px;
    opacity: 0.8;
}

table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.9rem;
}

table th {
    background: var(--primary);
    color: white;
    padding: 10px 12px;
    text-align: left;
    font-weight: 600;
}

table th:first-child { border-radius: 8px 0 0 0; }
table th:last-child { border-radius: 0 8px 0 0; }

table td {
    padding: 9px 12px;
    border-bottom: 1px solid var(--border);
}

table tr:nth-child(even) { background: #f4f6f8; }
table tr:hover { background: #e8f0fe; }

.highlight-row td { font-weight: 600; color: var(--danger); }

.finding-list {
    list-style: none;
    padding: 0;
}

.finding-list li {
    padding: 14px 16px;
    border-left: 4px solid var(--accent);
    margin-bottom: 12px;
    background: #f0f7fd;
    border-radius: 0 8px 8px 0;
}

.finding-list li strong {
    color: var(--primary);
    display: block;
    margin-bottom: 4px;
}

.full-width {
    grid-column: 1 / -1;
}

.tab-container {
    display: flex;
    gap: 4px;
    margin-bottom: 20px;
    border-bottom: 2px solid var(--border);
    padding-bottom: 0;
}

.tab-btn {
    padding: 10px 20px;
    border: none;
    background: transparent;
    color: var(--text-light);
    font-size: 0.95rem;
    font-weight: 500;
    cursor: pointer;
    border-bottom: 3px solid transparent;
    margin-bottom: -2px;
    transition: all 0.2s;
}

.tab-btn.active {
    color: var(--accent);
    border-bottom-color: var(--accent);
    font-weight: 600;
}

.tab-btn:hover { color: var(--primary); }

.tab-panel { display: none; }
.tab-panel.active { display: block; }

footer {
    background: var(--primary);
    color: rgba(255,255,255,0.8);
    padding: 32px 20px;
    text-align: center;
    font-size: 0.85rem;
}

footer a { color: var(--accent-light); text-decoration: none; }
footer a:hover { text-decoration: underline; }

@media (max-width: 900px) {
    .grid-2, .grid-3 { grid-template-columns: 1fr; }
    .hero h1 { font-size: 1.6rem; }
    .hero .equation { font-size: 1rem; padding: 10px 16px; }
}
</style>
</head>
<body>

<!-- Hero Section -->
<div class="hero">
    <div class="container">
        <h1>Polynomial-Time Computability of the Lattice Theta Function</h1>
        <p class="subtitle">
            A computational investigation into whether the lattice theta function can be evaluated
            in polynomial time for general complex symmetric matrices of large dimension.
        </p>
        <div class="equation">
            &Theta;(A, d) = &Sigma;<sub>x &isin; Z<sup>n</sup></sub> exp(2&pi;i (x+d)<sup>T</sup> A (x+d))
        </div>
        <div class="badges">
            <span class="badge badge-primary">Quantum Physics</span>
            <span class="badge badge-primary">Computational Complexity</span>
            
            <span class="badge badge-primary">Open Problem</span>
        </div>
    </div>
</div>

<!-- Key Statistics -->
<div class="container">
    <div class="section">
        <h2 class="section-title">Key Findings</h2>
        <p class="section-subtitle">Summary of experimental results across dimensions n = 1 to 15</p>
        <div class="grid-3">
            <div class="card stat-card">
                <div class="stat-value">exp(1.61n)</div>
                <div class="stat-label">Exponential Scaling Rate</div>
                <div class="stat-detail">Term count growth with dimension n</div>
            </div>
            <div class="card stat-card">
                <div class="stat-value">6x10<sup>5</sup>x</div>
                <div class="stat-label">General vs Diagonal Gap at n=7</div>
                <div class="stat-detail">39.15s general vs 6.4e-5s diagonal</div>
            </div>
            <div class="card stat-card">
                <div class="stat-value">0.230</div>
                <div class="stat-label">CVP Distance Recovered</div>
                <div class="stat-detail">Matching true value by t = 5</div>
            </div>
        </div>
    </div>
</div>

<!-- Charts Section -->
<div class="container">
    <div class="section">
        <h2 class="section-title">Experimental Results</h2>
        <p class="section-subtitle">Interactive charts from computational experiments</p>

        <div class="tab-container">
            <button class="tab-btn active" onclick="showTab('scaling')">Scaling</button>
            <button class="tab-btn" onclick="showTab('convergence')">Convergence</button>
            <button class="tab-btn" onclick="showTab('diagonal')">Tractability</button>
            <button class="tab-btn" onclick="showTab('svp')">CVP Connection</button>
            <button class="tab-btn" onclick="showTab('lll')">LLL Reduction</button>
            <button class="tab-btn" onclick="showTab('poisson')">Poisson Duality</button>
        </div>

        <!-- Scaling Tab -->
        <div class="tab-panel active" id="tab-scaling">
            <div class="grid-2">
                <div class="card">
                    <div class="card-title">Computation Time vs Dimension</div>
                    <div class="chart-container">
                        <canvas id="chart-scaling-time"></canvas>
                    </div>
                </div>
                <div class="card">
                    <div class="card-title">Number of Terms vs Dimension</div>
                    <div class="chart-container">
                        <canvas id="chart-scaling-terms"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Convergence Tab -->
        <div class="tab-panel" id="tab-convergence">
            <div class="grid-2">
                <div class="card">
                    <div class="card-title">Truncation Radius vs Eigenvalue</div>
                    <div class="chart-container">
                        <canvas id="chart-conv-radius"></canvas>
                    </div>
                </div>
                <div class="card">
                    <div class="card-title">Computation Time vs Eigenvalue</div>
                    <div class="chart-container">
                        <canvas id="chart-conv-time"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Diagonal Tab -->
        <div class="tab-panel" id="tab-diagonal">
            <div class="grid-2">
                <div class="card full-width">
                    <div class="card-title">Tractability Frontier: Diagonal (Polynomial) vs General (Exponential)</div>
                    <div class="chart-container" style="height:380px;">
                        <canvas id="chart-diagonal"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- SVP Tab -->
        <div class="tab-panel" id="tab-svp">
            <div class="grid-2">
                <div class="card">
                    <div class="card-title">Theta Magnitude vs Scaling Parameter t</div>
                    <div class="chart-container">
                        <canvas id="chart-svp-mag"></canvas>
                    </div>
                </div>
                <div class="card">
                    <div class="card-title">CVP Distance Estimation via Theta</div>
                    <div class="chart-container">
                        <canvas id="chart-svp-dist"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- LLL Tab -->
        <div class="tab-panel" id="tab-lll">
            <div class="grid-2">
                <div class="card">
                    <div class="card-title">Condition Number Before/After LLL</div>
                    <div class="chart-container">
                        <canvas id="chart-lll-cond"></canvas>
                    </div>
                </div>
                <div class="card">
                    <div class="card-title">LLL Improvement Ratio by Dimension</div>
                    <div class="chart-container">
                        <canvas id="chart-lll-ratio"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Poisson Tab -->
        <div class="tab-panel" id="tab-poisson">
            <div class="grid-2">
                <div class="card full-width">
                    <div class="card-title">Primal vs Dual (Poisson) Computation Time</div>
                    <div class="chart-container" style="height:380px;">
                        <canvas id="chart-poisson"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Data Tables -->
<div class="container">
    <div class="section">
        <h2 class="section-title">Detailed Data</h2>
        <p class="section-subtitle">Numerical results from all experiments</p>
        <div class="grid-2">
            <div class="card">
                <div class="card-title">Scaling Experiment (Direct Summation)</div>
                <table>
                    <thead>
                        <tr><th>n</th><th>Terms</th><th>Time (s)</th><th>Time LLL (s)</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>1</td><td>7</td><td>0.0001</td><td>0.0001</td></tr>
                        <tr><td>2</td><td>25</td><td>0.0001</td><td>0.0002</td></tr>
                        <tr><td>3</td><td>125</td><td>0.0003</td><td>0.0004</td></tr>
                        <tr><td>4</td><td>625</td><td>0.0024</td><td>0.0034</td></tr>
                        <tr><td>5</td><td>3,125</td><td>0.3869</td><td>0.1014</td></tr>
                        <tr><td>6</td><td>15,625</td><td>0.0340</td><td>0.9601</td></tr>
                        <tr class="highlight-row"><td>7</td><td>78,125</td><td>3.8339</td><td>3.2964</td></tr>
                    </tbody>
                </table>
            </div>
            <div class="card">
                <div class="card-title">CVP Distance from Theta Function</div>
                <table>
                    <thead>
                        <tr><th>t</th><th>|Theta|</th><th>Est. min norm<sup>2</sup></th></tr>
                    </thead>
                    <tbody>
                        <tr><td>0.5</td><td>1.085</td><td>-0.026</td></tr>
                        <tr><td>1.0</td><td>3.23e-1</td><td>0.180</td></tr>
                        <tr><td>2.0</td><td>5.91e-2</td><td>0.225</td></tr>
                        <tr><td>5.0</td><td>7.28e-4</td><td>0.230</td></tr>
                        <tr><td>10.0</td><td>5.30e-7</td><td>0.230</td></tr>
                        <tr><td>20.0</td><td>2.80e-13</td><td>0.230</td></tr>
                        <tr><td>50.0</td><td>4.16e-32</td><td>0.230</td></tr>
                        <tr><td>100.0</td><td>1.73e-63</td><td>0.230</td></tr>
                    </tbody>
                </table>
                <p style="margin-top:10px;font-size:0.85rem;color:var(--text-light);">
                    True CVP distance: 0.230 (brute-force computed)
                </p>
            </div>
        </div>
    </div>
</div>

<!-- Findings -->
<div class="container">
    <div class="section">
        <h2 class="section-title">Main Conclusions</h2>
        <p class="section-subtitle">Evidence regarding the open problem of polynomial-time computability</p>
        <div class="grid-2">
            <div class="card">
                <ul class="finding-list">
                    <li>
                        <strong>Exponential Scaling Confirmed</strong>
                        The summation domain grows as exp(1.61n) for typical random matrices,
                        spanning five orders of magnitude from n=1 to n=7. This is consistent
                        with the conjecture that no polynomial-time algorithm exists for general A.
                    </li>
                    <li>
                        <strong>LLL Reduction Is Insufficient</strong>
                        Lattice reduction provides at most polynomial improvement. The improvement
                        ratio drops below 1.0 for n >= 4, indicating that LLL cannot overcome
                        the exponential barrier.
                    </li>
                    <li>
                        <strong>Poisson Duality Is Complementary</strong>
                        Primal and dual sums have inverse convergence rates. In our experiments
                        the primal consistently outperformed the dual, and neither achieves
                        polynomial time across all parameter regimes.
                    </li>
                </ul>
            </div>
            <div class="card">
                <ul class="finding-list">
                    <li>
                        <strong>Sharp Tractability Frontier</strong>
                        Diagonal matrices admit O(n * R) polynomial computation, while general
                        dense matrices require O((2R+1)^n) exponential effort. The gap exceeds
                        600,000x by dimension n=7.
                    </li>
                    <li>
                        <strong>CVP Hardness Connection</strong>
                        The theta function encodes the Closest Vector Problem (NP-hard) through
                        the scaling limit. Estimates converge to the true CVP distance 0.230
                        by t = 5, confirming the hardness encoding.
                    </li>
                    <li>
                        <strong>Quantum Algorithms May Help</strong>
                        The quantum-physics origin of this problem, combined with Regev's work
                        on lattice problems, suggests that quantum polynomial-time algorithms
                        may exist even if classical ones cannot.
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<footer>
    <div class="container">
        <p>Lattice Theta Function: Computation and Complexity Analysis | </p>
        <p style="margin-top:8px;">
            Source:  |
            Reference: Bauer et al. (arXiv:2601.15396) | </p>
    </div>
</footer>

<script>
// ============================================================
// Data from experiments
// ============================================================

const scalingData = {
    n: [1, 2, 3, 4, 5, 6, 7],
    timesDirect: [7.37e-5, 9.11e-5, 3.15e-4, 2.37e-3, 3.87e-1, 3.40e-2, 3.83],
    timesLLL: [8.26e-5, 1.52e-4, 4.13e-4, 3.44e-3, 1.01e-1, 9.60e-1, 3.30],
    nTerms: [7, 25, 125, 625, 3125, 15625, 78125]
};

const convergenceData = {
    lambdas: [0.1, 0.2, 0.5, 1.0, 2.0, 5.0, 10.0, 20.0, 50.0],
    R: [9, 7, 5, 4, 3, 3, 2, 2, 2],
    nTerms: [6859, 3375, 1331, 729, 343, 343, 125, 125, 125],
    times: [0.2539, 0.0089, 0.0035, 0.0019, 0.0008, 0.0008, 0.0003, 0.0003, 0.0003]
};

const poissonData = {
    scales: [0.1, 0.2, 0.5, 1.0, 2.0, 5.0, 10.0],
    primal: [0.0008, 0.0020, 0.0009, 0.0004, 0.0004, 0.0004, 0.0007],
    dual: [0.2876, 0.0024, 0.1857, 0.1123, 0.0315, 0.2745, 0.7540]
};

const diagonalData = {
    n: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15],
    diag: [2.43e-5, 1.81e-5, 2.28e-5, 2.88e-5, 4.38e-5, 5.00e-4, 6.40e-5, 3.14e-4, 1.81e-4, 1.14e-4, 1.00e-4, 9.82e-5, 1.00e-4, 1.08e-4, 1.15e-4],
    general: [3.28e-5, 1.29e-4, 8.23e-4, 7.22e-2, 5.56e-1, 4.78, 39.15]
};

const svpData = {
    t: [0.5, 1.0, 2.0, 5.0, 10.0, 20.0, 50.0, 100.0],
    thetaAbs: [1.085, 0.3232, 0.05907, 7.281e-4, 5.295e-7, 2.804e-13, 4.162e-32, 1.733e-63],
    estMin: [-0.026, 0.180, 0.225, 0.230, 0.230, 0.230, 0.230, 0.230],
    actual: 0.230
};

const lllData = {
    n: [2, 3, 4, 5, 6, 7, 8, 9, 10],
    condBefore: [32.1, 32.1, 32.1, 32.1, 32.1, 32.1, 32.1, 32.1, 32.1],
    condAfter: [114.5, 80.5, 241.8, 126.7, 92.6, 135.8, 124.8, 82.8, 99.2],
    ratio: [3.27, 1.99, 0.67, 1.03, 1.01, 0.71, 0.78, 0.75, 0.64],
    stdRatio: [5.26, 1.66, 0.85, 1.33, 1.07, 0.60, 0.72, 0.45, 0.47]
};

// ============================================================
// Chart configurations
// ============================================================

const baseOptions = {
    responsive: true,
    maintainAspectRatio: false,
    plugins: {
        legend: { labels: { usePointStyle: true, padding: 16 } }
    }
};

// Scaling: Time
new Chart(document.getElementById('chart-scaling-time'), {
    type: 'line',
    data: {
        labels: scalingData.n,
        datasets: [
            {
                label: 'Direct Summation',
                data: scalingData.timesDirect,
                borderColor: '#d62728',
                backgroundColor: 'rgba(214,39,40,0.1)',
                pointRadius: 5,
                borderWidth: 2,
                fill: false
            },
            {
                label: 'LLL-Reduced',
                data: scalingData.timesLLL,
                borderColor: '#1f77b4',
                backgroundColor: 'rgba(31,119,180,0.1)',
                borderDash: [6, 3],
                pointRadius: 5,
                borderWidth: 2,
                fill: false
            }
        ]
    },
    options: {
        ...baseOptions,
        scales: {
            x: { title: { display: true, text: 'Dimension n' } },
            y: {
                type: 'logarithmic',
                title: { display: true, text: 'Time (seconds)' },
                min: 0.00005
            }
        }
    }
});

// Scaling: Terms
new Chart(document.getElementById('chart-scaling-terms'), {
    type: 'line',
    data: {
        labels: scalingData.n,
        datasets: [{
            label: 'Lattice Points Summed',
            data: scalingData.nTerms,
            borderColor: '#2ca02c',
            backgroundColor: 'rgba(44,160,44,0.1)',
            pointRadius: 5,
            pointStyle: 'rectDiamond',
            borderWidth: 2,
            fill: true
        }]
    },
    options: {
        ...baseOptions,
        scales: {
            x: { title: { display: true, text: 'Dimension n' } },
            y: {
                type: 'logarithmic',
                title: { display: true, text: 'Number of Terms' }
            }
        }
    }
});

// Convergence: Radius
new Chart(document.getElementById('chart-conv-radius'), {
    type: 'line',
    data: {
        labels: convergenceData.lambdas,
        datasets: [{
            label: 'Truncation Radius R',
            data: convergenceData.R,
            borderColor: '#9467bd',
            pointRadius: 5,
            borderWidth: 2,
            fill: false
        }]
    },
    options: {
        ...baseOptions,
        scales: {
            x: {
                type: 'logarithmic',
                title: { display: true, text: 'Minimum Eigenvalue' }
            },
            y: { title: { display: true, text: 'Truncation Radius R' } }
        }
    }
});

// Convergence: Time
new Chart(document.getElementById('chart-conv-time'), {
    type: 'line',
    data: {
        labels: convergenceData.lambdas,
        datasets: [
            {
                label: 'Number of Terms',
                data: convergenceData.nTerms,
                borderColor: '#e377c2',
                pointRadius: 5,
                borderWidth: 2,
                fill: false,
                yAxisID: 'y'
            },
            {
                label: 'Time (s)',
                data: convergenceData.times,
                borderColor: '#17becf',
                borderDash: [6, 3],
                pointRadius: 5,
                borderWidth: 2,
                fill: false,
                yAxisID: 'y1'
            }
        ]
    },
    options: {
        ...baseOptions,
        scales: {
            x: {
                type: 'logarithmic',
                title: { display: true, text: 'Minimum Eigenvalue' }
            },
            y: {
                type: 'logarithmic',
                position: 'left',
                title: { display: true, text: 'Number of Terms' }
            },
            y1: {
                type: 'logarithmic',
                position: 'right',
                title: { display: true, text: 'Time (s)' },
                grid: { drawOnChartArea: false }
            }
        }
    }
});

// Diagonal vs General
new Chart(document.getElementById('chart-diagonal'), {
    type: 'line',
    data: {
        labels: diagonalData.n,
        datasets: [
            {
                label: 'Diagonal (Polynomial)',
                data: diagonalData.diag,
                borderColor: '#2ca02c',
                backgroundColor: 'rgba(44,160,44,0.1)',
                pointRadius: 5,
                borderWidth: 2,
                fill: false
            },
            {
                label: 'General (Exponential)',
                data: diagonalData.general.concat(Array(8).fill(null)),
                borderColor: '#d62728',
                backgroundColor: 'rgba(214,39,40,0.1)',
                pointRadius: 5,
                pointStyle: 'rectDiamond',
                borderWidth: 2,
                fill: false,
                spanGaps: false
            }
        ]
    },
    options: {
        ...baseOptions,
        scales: {
            x: { title: { display: true, text: 'Dimension n' } },
            y: {
                type: 'logarithmic',
                title: { display: true, text: 'Time (seconds)' },
                min: 0.00001
            }
        }
    }
});

// SVP Magnitude
new Chart(document.getElementById('chart-svp-mag'), {
    type: 'line',
    data: {
        labels: svpData.t,
        datasets: [{
            label: '|Theta(-itT, d)|',
            data: svpData.thetaAbs,
            borderColor: '#ff7f0e',
            pointRadius: 5,
            borderWidth: 2,
            fill: false
        }]
    },
    options: {
        ...baseOptions,
        scales: {
            x: { title: { display: true, text: 'Scaling Parameter t' } },
            y: {
                type: 'logarithmic',
                title: { display: true, text: '|Theta|' }
            }
        }
    }
});

// SVP Distance
new Chart(document.getElementById('chart-svp-dist'), {
    type: 'line',
    data: {
        labels: svpData.t,
        datasets: [
            {
                label: 'Estimated from Theta',
                data: svpData.estMin,
                borderColor: '#9467bd',
                pointRadius: 5,
                pointStyle: 'rectDiamond',
                borderWidth: 2,
                fill: false
            },
            {
                label: 'True CVP Distance (0.230)',
                data: svpData.t.map(() => svpData.actual),
                borderColor: '#2ca02c',
                borderDash: [8, 4],
                pointRadius: 0,
                borderWidth: 2,
                fill: false
            }
        ]
    },
    options: {
        ...baseOptions,
        scales: {
            x: { title: { display: true, text: 'Scaling Parameter t' } },
            y: { title: { display: true, text: 'Min norm squared' } }
        }
    }
});

// LLL Condition Numbers
new Chart(document.getElementById('chart-lll-cond'), {
    type: 'line',
    data: {
        labels: lllData.n,
        datasets: [
            {
                label: 'Before LLL',
                data: lllData.condBefore,
                borderColor: '#d62728',
                pointRadius: 5,
                borderWidth: 2,
                fill: false
            },
            {
                label: 'After LLL',
                data: lllData.condAfter,
                borderColor: '#1f77b4',
                borderDash: [6, 3],
                pointRadius: 5,
                borderWidth: 2,
                fill: false
            }
        ]
    },
    options: {
        ...baseOptions,
        scales: {
            x: { title: { display: true, text: 'Dimension n' } },
            y: {
                type: 'logarithmic',
                title: { display: true, text: 'Condition Number' }
            }
        }
    }
});

// LLL Ratio
new Chart(document.getElementById('chart-lll-ratio'), {
    type: 'bar',
    data: {
        labels: lllData.n,
        datasets: [{
            label: 'Improvement Ratio',
            data: lllData.ratio,
            backgroundColor: 'rgba(23,190,207,0.7)',
            borderColor: '#17becf',
            borderWidth: 1
        }]
    },
    options: {
        ...baseOptions,
        scales: {
            x: { title: { display: true, text: 'Dimension n' } },
            y: { title: { display: true, text: 'Ratio (before/after)' } }
        },
        plugins: {
            ...baseOptions.plugins,
            annotation: {
                annotations: {
                    line1: {
                        type: 'line',
                        yMin: 1,
                        yMax: 1,
                        borderColor: '#e74c3c',
                        borderWidth: 2,
                        borderDash: [6, 3]
                    }
                }
            }
        }
    }
});

// Poisson
new Chart(document.getElementById('chart-poisson'), {
    type: 'line',
    data: {
        labels: poissonData.scales,
        datasets: [
            {
                label: 'Primal (Direct)',
                data: poissonData.primal,
                borderColor: '#d62728',
                pointRadius: 6,
                borderWidth: 2,
                fill: false
            },
            {
                label: 'Dual (Poisson)',
                data: poissonData.dual,
                borderColor: '#1f77b4',
                borderDash: [6, 3],
                pointRadius: 6,
                pointStyle: 'rectRot',
                borderWidth: 2,
                fill: false
            }
        ]
    },
    options: {
        ...baseOptions,
        scales: {
            x: {
                type: 'logarithmic',
                title: { display: true, text: 'Imaginary Part Scale' }
            },
            y: {
                type: 'logarithmic',
                title: { display: true, text: 'Time (seconds)' }
            }
        }
    }
});

// ============================================================
// Tab switching
// ============================================================

function showTab(name) {
    document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    document.getElementById('tab-' + name).classList.add('active');
    event.target.classList.add('active');

    // Trigger chart resize
    setTimeout(() => {
        window.dispatchEvent(new Event('resize'));
    }, 50);
}
</script>

</body>
</html>
