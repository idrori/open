<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reproducible Trace Protocols & Leakage-Robust Evaluation</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
    <style>
        :root { --primary: #1a3a5c; --accent: #2980b9; --bg: #f5f7fa; --card-bg: #fff; --text: #2c3e50; --text-light: #7f8c8d; --border: #e0e6ed; --success: #27ae60; --warning: #f39c12; --danger: #e74c3c; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; }
        .header { background: linear-gradient(135deg, var(--primary), var(--accent)); color: white; padding: 2rem; text-align: center; }
        .header h1 { font-size: 1.7rem; margin-bottom: 0.5rem; }
        .header p { opacity: 0.9; max-width: 700px; margin: 0 auto; }
        .container { max-width: 1200px; margin: 0 auto; padding: 2rem; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem; }
        .card { background: var(--card-bg); border-radius: 12px; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08); border: 1px solid var(--border); }
        .card h3 { color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem; border-bottom: 2px solid var(--accent); padding-bottom: 0.5rem; }
        .card-full { grid-column: 1 / -1; }
        .chart-container { position: relative; height: 350px; }
        .metric-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 1.5rem; }
        .metric-card { background: var(--card-bg); border-radius: 10px; padding: 1.2rem; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.08); border-left: 4px solid var(--accent); }
        .metric-card .value { font-size: 1.8rem; font-weight: 700; color: var(--primary); }
        .metric-card .label { font-size: 0.85rem; color: var(--text-light); margin-top: 0.3rem; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 0.7rem; text-align: center; border-bottom: 1px solid var(--border); }
        th { background: var(--primary); color: white; }
        tr:hover { background: #f0f4f8; }
        .best { color: var(--success); font-weight: 700; }
        @media (max-width: 768px) { .grid { grid-template-columns: 1fr; } .metric-grid { grid-template-columns: repeat(2, 1fr); } }
    </style>
</head>
<body>
    <div class="header">
        <h1>Reproducible Trace Protocols & Leakage-Robust Evaluation</h1>
        <p>Quantifying the impact of standardized trace collection on agent evaluation reliability</p>
    </div>
    <div class="container">
        <div class="metric-grid">
            <div class="metric-card">
                <div class="value">0.981</div>
                <div class="label">Full Protocol Reproducibility</div>
            </div>
            <div class="metric-card">
                <div class="value">90%</div>
                <div class="label">Leakage Reduction</div>
            </div>
            <div class="metric-card">
                <div class="value">2.5x</div>
                <div class="label">Improvement Over Baseline</div>
            </div>
            <div class="metric-card">
                <div class="value">5</div>
                <div class="label">Protocol Regimes Tested</div>
            </div>
        </div>
        <div class="grid">
            <div class="card">
                <h3>Reproducibility by Protocol Regime</h3>
                <div class="chart-container"><canvas id="chartProtocol"></canvas></div>
            </div>
            <div class="card">
                <h3>Leakage Reduction</h3>
                <div class="chart-container"><canvas id="chartLeakage"></canvas></div>
            </div>
            <div class="card">
                <h3>Benchmark Ranking Disruption</h3>
                <div class="chart-container"><canvas id="chartBenchmark"></canvas></div>
            </div>
            <div class="card">
                <h3>Protocol Components Breakdown</h3>
                <div class="chart-container"><canvas id="chartComponents"></canvas></div>
            </div>
        </div>
        <div class="card card-full">
            <h3>Protocol Regime Comparison</h3>
            <table>
                <thead><tr><th>Regime</th><th>Reproducibility</th><th>Completeness</th><th>Eff. Leakage</th><th>Schema Compliance</th></tr></thead>
                <tbody>
                    <tr><td>No Protocol</td><td>0.393</td><td>0.297</td><td>0.091</td><td>0.000</td></tr>
                    <tr><td>Partial Logging</td><td>0.507</td><td>0.603</td><td>0.100</td><td>0.000</td></tr>
                    <tr><td>Full Logging</td><td>0.750</td><td>0.949</td><td>0.104</td><td>0.720</td></tr>
                    <tr><td>Full + Sanitized</td><td>0.939</td><td>0.948</td><td>0.099</td><td>0.735</td></tr>
                    <tr class="best"><td><strong>Full Protocol</strong></td><td><strong>0.981</strong></td><td><strong>0.979</strong></td><td><strong>0.010</strong></td><td><strong>0.890</strong></td></tr>
                </tbody>
            </table>
        </div>
    </div>
    <script>
    const regimeLabels = ['No Protocol', 'Partial Log', 'Full Log', 'Full+Sanit.', 'Full Protocol'];
    const regimeColors = ['#e74c3c', '#f39c12', '#3498db', '#9b59b6', '#27ae60'];

    new Chart(document.getElementById('chartProtocol'), {
        type: 'bar',
        data: {
            labels: regimeLabels,
            datasets: [{
                label: 'Reproducibility Score',
                data: [0.393, 0.507, 0.750, 0.939, 0.981],
                backgroundColor: regimeColors.map(c => c + 'cc'),
                borderColor: regimeColors,
                borderWidth: 2
            }]
        },
        options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true, max: 1.1 } }, plugins: { legend: { display: false } } }
    });

    new Chart(document.getElementById('chartLeakage'), {
        type: 'line',
        data: {
            labels: [0, 0.05, 0.1, 0.2, 0.3, 0.5],
            datasets: [
                { label: 'No Protocol', data: [0, 0.05, 0.091, 0.19, 0.29, 0.48], borderColor: '#e74c3c', borderWidth: 2.5, pointRadius: 5, tension: 0.3 },
                { label: 'Full Protocol', data: [0, 0.005, 0.010, 0.020, 0.030, 0.050], borderColor: '#27ae60', borderWidth: 2.5, pointRadius: 5, tension: 0.3 }
            ]
        },
        options: { responsive: true, maintainAspectRatio: false, scales: { x: { title: { display: true, text: 'Raw Leakage Rate' } }, y: { title: { display: true, text: 'Effective Leakage' } } }, plugins: { legend: { position: 'bottom' } } }
    });

    new Chart(document.getElementById('chartBenchmark'), {
        type: 'line',
        data: {
            labels: [0, 0.05, 0.1, 0.2, 0.3, 0.5],
            datasets: [{
                label: 'Ranking Disruption',
                data: [0, 0.02, 0.05, 0.11, 0.18, 0.28],
                borderColor: '#e74c3c',
                backgroundColor: '#e74c3c22',
                fill: true,
                borderWidth: 2.5,
                pointRadius: 5,
                tension: 0.3
            }]
        },
        options: { responsive: true, maintainAspectRatio: false, scales: { x: { title: { display: true, text: 'Leakage Rate' } }, y: { title: { display: true, text: 'Pairwise Ranking Disruption' } } }, plugins: { legend: { position: 'bottom' } } }
    });

    new Chart(document.getElementById('chartComponents'), {
        type: 'radar',
        data: {
            labels: ['Completeness', 'Low Leakage', 'Sanitization', 'Schema Valid.', 'Deduplication'],
            datasets: [
                { label: 'No Protocol', data: [0.3, 0.91, 0, 0, 0], borderColor: '#e74c3c', backgroundColor: '#e74c3c22', borderWidth: 2 },
                { label: 'Full Protocol', data: [0.98, 0.99, 0.93, 0.89, 1.0], borderColor: '#27ae60', backgroundColor: '#27ae6022', borderWidth: 2 }
            ]
        },
        options: { responsive: true, maintainAspectRatio: false, scales: { r: { min: 0, max: 1 } }, plugins: { legend: { position: 'bottom' } } }
    });
    </script>
</body>
</html>
