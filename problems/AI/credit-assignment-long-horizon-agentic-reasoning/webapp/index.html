<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HHCA Framework - Hierarchical Hindsight Credit Assignment</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  :root { --bg-deep: #0D0221; --bg-surface: #1A0A3E; --violet: #7B2FBE; --electric-blue: #2DE1FC; --soft-pink: #FF61D2; --text-primary: #F0E6FF; --text-secondary: #B8A4D6; --text-muted: #7A6B94; --card-bg: rgba(26, 10, 62, 0.7); --card-border: rgba(123, 47, 190, 0.3); --glow-violet: rgba(123, 47, 190, 0.15); }
  html { scroll-behavior: smooth; }
  body { font-family: DM Sans, sans-serif; background: var(--bg-deep); color: var(--text-primary); line-height: 1.6; overflow-x: hidden; }
  body::before { content: ""; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: radial-gradient(ellipse at 20% 20%, rgba(123,47,190,0.12) 0%, transparent 50%), radial-gradient(ellipse at 80% 80%, rgba(45,225,252,0.08) 0%, transparent 50%), radial-gradient(ellipse at 50% 50%, rgba(255,97,210,0.05) 0%, transparent 60%); pointer-events: none; z-index: 0; }
  .container { max-width: 1280px; margin: 0 auto; padding: 0 24px; position: relative; z-index: 1; }
  .header { padding: 64px 0 48px; text-align: center; position: relative; }
  .header::after { content: ""; position: absolute; bottom: 0; left: 10%; right: 10%; height: 1px; background: linear-gradient(90deg, transparent, var(--violet), var(--electric-blue), var(--violet), transparent); }

  @keyframes pulse-dot { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.5; transform: scale(1.4); } }
  h1 { font-family: Syne, sans-serif; font-weight: 800; font-size: clamp(2rem, 5vw, 3.2rem); line-height: 1.15; background: linear-gradient(135deg, var(--text-primary) 0%, var(--electric-blue) 50%, var(--soft-pink) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 16px; }
  .header-subtitle { font-size: 1.1rem; color: var(--text-secondary); max-width: 700px; margin: 0 auto 24px; }
  .header-meta { display: flex; justify-content: center; gap: 24px; flex-wrap: wrap; font-size: 0.85rem; color: var(--text-muted); }
  .header-meta span { display: flex; align-items: center; gap: 6px; }
  .section-title { font-family: Syne, sans-serif; font-weight: 700; font-size: 1.6rem; margin-bottom: 8px; color: var(--text-primary); }
  .section-subtitle { color: var(--text-secondary); font-size: 0.95rem; margin-bottom: 32px; }
  section { padding: 56px 0; position: relative; }
  .metrics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin-top: 40px; }
  .metric-card { background: var(--card-bg); border: 1px solid var(--card-border); border-radius: 16px; padding: 28px 24px; text-align: center; position: relative; overflow: hidden; transition: transform 0.3s ease, border-color 0.3s ease; }
  .metric-card:hover { transform: translateY(-4px); border-color: var(--electric-blue); }
  .metric-card::before { content: ""; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, var(--violet), var(--electric-blue)); border-radius: 16px 16px 0 0; }
  .metric-value { font-family: Syne, sans-serif; font-weight: 800; font-size: 2.2rem; background: linear-gradient(135deg, var(--electric-blue), var(--soft-pink)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
  .metric-label { font-size: 0.85rem; color: var(--text-secondary); margin-top: 6px; font-weight: 500; }
  .metric-detail { font-size: 0.75rem; color: var(--text-muted); margin-top: 4px; }
  .findings-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(230px, 1fr)); gap: 20px; }
  .finding-card { background: var(--card-bg); border: 1px solid var(--card-border); border-radius: 14px; padding: 24px; transition: transform 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease; }
  .finding-card:hover { transform: translateY(-3px); border-color: var(--soft-pink); box-shadow: 0 8px 32px rgba(255,97,210,0.1); }
  .finding-number { font-family: Syne, sans-serif; font-weight: 800; font-size: 0.75rem; color: var(--electric-blue); letter-spacing: 2px; text-transform: uppercase; margin-bottom: 10px; }
  .finding-title { font-family: Syne, sans-serif; font-weight: 600; font-size: 1.05rem; color: var(--text-primary); margin-bottom: 8px; line-height: 1.3; }
  .finding-desc { font-size: 0.85rem; color: var(--text-secondary); line-height: 1.5; }
  .chart-card { background: var(--card-bg); border: 1px solid var(--card-border); border-radius: 16px; padding: 32px; margin-bottom: 32px; position: relative; overflow: hidden; }
  .chart-card::before { content: ""; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle at center, var(--glow-violet), transparent 70%); opacity: 0.3; pointer-events: none; }
  .chart-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 24px; position: relative; z-index: 1; }
  .chart-title { font-family: Syne, sans-serif; font-weight: 700; font-size: 1.25rem; color: var(--text-primary); }
  .chart-desc { font-size: 0.85rem; color: var(--text-secondary); margin-top: 4px; }
  .chart-wrapper { position: relative; z-index: 1; height: 380px; }
  .chart-wrapper-wide { height: 420px; }
  .transfer-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; position: relative; z-index: 1; }
  .transfer-card { background: rgba(13,2,33,0.6); border: 1px solid var(--card-border); border-radius: 12px; padding: 24px; text-align: center; transition: border-color 0.3s; }
  .transfer-card:hover { border-color: var(--electric-blue); }
  .transfer-card.highlight { border-color: var(--electric-blue); box-shadow: 0 0 24px rgba(45,225,252,0.15); }
  .transfer-method { font-family: Syne, sans-serif; font-weight: 700; font-size: 1rem; margin-bottom: 16px; color: var(--text-primary); }
  .transfer-row { display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid rgba(123,47,190,0.15); font-size: 0.85rem; }
  .transfer-row:last-child { border-bottom: none; }
  .transfer-label { color: var(--text-secondary); }
  .transfer-val { font-weight: 600; color: var(--text-primary); }
  .transfer-val.best { color: var(--electric-blue); }
  .transfer-gap { margin-top: 12px; padding: 10px; border-radius: 8px; font-family: Syne, sans-serif; font-weight: 700; font-size: 1.1rem; }
  .gap-good { background: rgba(45,225,252,0.1); color: var(--electric-blue); }
  .gap-ok { background: rgba(255,97,210,0.1); color: var(--soft-pink); }
  .gap-warn { background: rgba(255,180,100,0.1); color: #FFB464; }
  @media (max-width: 700px) { .transfer-grid { grid-template-columns: 1fr; } }
  .table-wrapper { overflow-x: auto; position: relative; z-index: 1; }
  table.data-table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
  table.data-table th { font-family: Syne, sans-serif; font-weight: 600; text-align: left; padding: 14px 16px; color: var(--electric-blue); border-bottom: 2px solid var(--card-border); font-size: 0.8rem; letter-spacing: 0.5px; text-transform: uppercase; }
  table.data-table td { padding: 14px 16px; border-bottom: 1px solid rgba(123,47,190,0.12); color: var(--text-secondary); }
  table.data-table tr:hover td { background: rgba(123,47,190,0.06); color: var(--text-primary); }
  table.data-table .row-highlight td { color: var(--text-primary); font-weight: 500; }
  .overhead-bar { display: inline-block; height: 8px; border-radius: 4px; background: linear-gradient(90deg, var(--violet), var(--electric-blue)); vertical-align: middle; margin-right: 8px; min-width: 4px; }
  .comparison-controls { display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 28px; position: relative; z-index: 1; }
  .comp-btn { font-family: DM Sans, sans-serif; font-size: 0.85rem; font-weight: 600; padding: 10px 20px; border-radius: 10px; border: 1px solid var(--card-border); background: rgba(13,2,33,0.8); color: var(--text-secondary); cursor: pointer; transition: all 0.25s ease; }
  .comp-btn:hover { border-color: var(--violet); color: var(--text-primary); }
  .comp-btn.active { background: linear-gradient(135deg, var(--violet), #5A1E96); border-color: var(--violet); color: #fff; box-shadow: 0 4px 16px rgba(123,47,190,0.3); }
  .comparison-result { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; position: relative; z-index: 1; }
  .comp-metric { background: rgba(13,2,33,0.6); border: 1px solid var(--card-border); border-radius: 12px; padding: 20px; text-align: center; transition: all 0.3s; }
  .comp-metric-label { font-size: 0.8rem; color: var(--text-muted); margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.5px; font-weight: 500; }
  .comp-metric-value { font-family: Syne, sans-serif; font-weight: 800; font-size: 1.8rem; transition: color 0.3s; }
  .comp-metric-bar { margin-top: 10px; height: 6px; background: rgba(123,47,190,0.2); border-radius: 3px; overflow: hidden; }
  .comp-metric-fill { height: 100%; border-radius: 3px; transition: width 0.5s ease; }
  .methodology-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 24px; }
  .method-step { background: var(--card-bg); border: 1px solid var(--card-border); border-radius: 14px; padding: 28px; position: relative; transition: transform 0.3s ease; }
  .method-step:hover { transform: translateY(-3px); }
  .step-number { font-family: Syne, sans-serif; font-weight: 800; font-size: 2.4rem; background: linear-gradient(135deg, var(--violet), var(--electric-blue)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; line-height: 1; margin-bottom: 12px; }
  .step-title { font-family: Syne, sans-serif; font-weight: 700; font-size: 1.05rem; color: var(--text-primary); margin-bottom: 8px; }
  .step-desc { font-size: 0.85rem; color: var(--text-secondary); line-height: 1.55; }
  .footer { padding: 48px 0; text-align: center; border-top: 1px solid rgba(123,47,190,0.2); margin-top: 32px; }
  .footer-title { font-family: Syne, sans-serif; font-weight: 700; font-size: 1rem; color: var(--text-primary); margin-bottom: 8px; }
  .footer-text { font-size: 0.82rem; color: var(--text-muted); line-height: 1.6; max-width: 600px; margin: 0 auto; }
  .footer-links { margin-top: 16px; display: flex; justify-content: center; gap: 24px; }
  .footer-links a { color: var(--text-secondary); text-decoration: none; font-size: 0.82rem; transition: color 0.2s; }
  .footer-links a:hover { color: var(--electric-blue); }
  .nav-bar { position: sticky; top: 0; z-index: 100; background: rgba(13,2,33,0.92); backdrop-filter: blur(16px); border-bottom: 1px solid rgba(123,47,190,0.2); padding: 0 24px; }
  .nav-inner { max-width: 1280px; margin: 0 auto; display: flex; align-items: center; gap: 8px; overflow-x: auto; scrollbar-width: none; }
  .nav-inner::-webkit-scrollbar { display: none; }
  .nav-link { font-family: DM Sans, sans-serif; font-size: 0.78rem; font-weight: 500; color: var(--text-muted); text-decoration: none; padding: 14px 12px; white-space: nowrap; border-bottom: 2px solid transparent; transition: all 0.2s; }
  .nav-link:hover { color: var(--text-primary); border-bottom-color: var(--violet); }
  @media (max-width: 600px) { .metrics-grid { grid-template-columns: 1fr 1fr; } .chart-wrapper { height: 300px; } .chart-card { padding: 20px; } section { padding: 40px 0; } .transfer-grid { grid-template-columns: 1fr; } }
</style>
</head>
<body>
<nav class="nav-bar"><div class="nav-inner"><a href="#metrics" class="nav-link">Metrics</a><a href="#findings" class="nav-link">Findings</a><a href="#accuracy" class="nav-link">Accuracy</a><a href="#horizon" class="nav-link">Horizon</a><a href="#action-types" class="nav-link">Action Types</a><a href="#transfer" class="nav-link">Transfer</a><a href="#scalability" class="nav-link">Scalability</a><a href="#compare" class="nav-link">Compare</a><a href="#methodology" class="nav-link">Methodology</a></div></nav>
<div class="container">
  <header class="header">
    
    <h1>Hierarchical Hindsight Credit Assignment</h1>
    <p class="header-subtitle">A three-level decomposition framework for long-horizon agentic reasoning that achieves state-of-the-art credit assignment accuracy across diverse action hierarchies.</p>
    <div class="header-meta"><span>ArXiv: AI</span><span>200 Trajectories</span><span>4 Action Types</span><span>3 Methods Compared</span></div>
  </header>
  <section id="metrics"><div class="section-title">Key Metrics</div><div class="section-subtitle">HHCA framework performance highlights across all experiments</div><div class="metrics-grid"><div class="metric-card"><div class="metric-value">0.4507</div><div class="metric-label">Pearson Correlation</div><div class="metric-detail">HHCA credit accuracy (r)</div></div><div class="metric-card"><div class="metric-value">78.3%</div><div class="metric-label">Improvement</div><div class="metric-detail">Over Outcome-Only baseline</div></div><div class="metric-card"><div class="metric-value">0.0011</div><div class="metric-label">Transfer Gap</div><div class="metric-detail">Near-zero cross-task gap</div></div><div class="metric-card"><div class="metric-value">200</div><div class="metric-label">Trajectories</div><div class="metric-detail">Across 4 horizon bins</div></div></div></section>
  <section id="findings"><div class="section-title">Key Findings</div><div class="section-subtitle">Five principal discoveries from the HHCA evaluation</div><div class="findings-grid"><div class="finding-card"><div class="finding-number">Finding 01</div><div class="finding-title">Superior Credit Accuracy</div><div class="finding-desc">HHCA achieves r=0.4507 Pearson and 0.5588 Spearman correlation, substantially outperforming both Outcome-Only (r=0.2526) and Attention-Rollout (r=0.1955) baselines.</div></div><div class="finding-card"><div class="finding-number">Finding 02</div><div class="finding-title">Horizon Robustness</div><div class="finding-desc">Unlike baselines that degrade with longer horizons, HHCA maintains stable Pearson correlation (0.44-0.46) across all horizon bins from 10-step to 100-step trajectories.</div></div><div class="finding-card"><div class="finding-number">Finding 03</div><div class="finding-title">Action-Type Sensitivity</div><div class="finding-desc">HHCA excels at skill-selection credit (r=0.4462) and tool-call credit (r=0.4398), correctly attributing higher importance to strategic decisions over token-level actions.</div></div><div class="finding-card"><div class="finding-number">Finding 04</div><div class="finding-title">Cross-Task Generalization</div><div class="finding-desc">Transfer gap of only 0.0011 between train (r=0.4631) and test (r=0.4620) tasks demonstrates robust generalization without task-specific tuning.</div></div><div class="finding-card"><div class="finding-number">Finding 05</div><div class="finding-title">Accuracy-Cost Tradeoff</div><div class="finding-desc">While HHCA has higher computational overhead (5.1ms per action vs 0.003ms), the 78.3% accuracy improvement justifies the cost for applications requiring precise credit assignment.</div></div></div></section>
  <section id="accuracy"><div class="chart-card"><div class="chart-header"><div><div class="chart-title">Credit Accuracy Comparison</div><div class="chart-desc">Pearson, Spearman, Precision@K, and Recall@K across three methods</div></div></div><div class="chart-wrapper"><canvas id="creditAccuracyChart"></canvas></div></div></section>
  <section id="horizon"><div class="chart-card"><div class="chart-header"><div><div class="chart-title">Horizon Robustness Analysis</div><div class="chart-desc">Pearson correlation by trajectory length bin</div></div></div><div class="chart-wrapper"><canvas id="horizonChart"></canvas></div></div></section>
  <section id="action-types"><div class="chart-card"><div class="chart-header"><div><div class="chart-title">Action Type Analysis</div><div class="chart-desc">Pearson correlation by action type for each method</div></div></div><div class="chart-wrapper chart-wrapper-wide"><canvas id="actionTypeChart"></canvas></div></div></section>
  <section id="transfer"><div class="chart-card"><div class="chart-header"><div><div class="chart-title">Cross-Task Transfer</div><div class="chart-desc">Train vs. test correlations and transfer gap per method</div></div></div><div class="transfer-grid"><div class="transfer-card"><div class="transfer-method">Outcome-Only</div><div class="transfer-row"><span class="transfer-label">Train Pearson</span><span class="transfer-val">0.2561</span></div><div class="transfer-row"><span class="transfer-label">Test Pearson</span><span class="transfer-val">0.2463</span></div><div class="transfer-row"><span class="transfer-label">Train P@K</span><span class="transfer-val">0.2514</span></div><div class="transfer-row"><span class="transfer-label">Test P@K</span><span class="transfer-val">0.2219</span></div><div class="transfer-gap gap-ok">Gap: 0.0098</div></div><div class="transfer-card"><div class="transfer-method">Attention-Rollout</div><div class="transfer-row"><span class="transfer-label">Train Pearson</span><span class="transfer-val">0.1856</span></div><div class="transfer-row"><span class="transfer-label">Test Pearson</span><span class="transfer-val">0.2029</span></div><div class="transfer-row"><span class="transfer-label">Train P@K</span><span class="transfer-val">0.2466</span></div><div class="transfer-row"><span class="transfer-label">Test P@K</span><span class="transfer-val">0.2412</span></div><div class="transfer-gap gap-warn">Gap: -0.0173</div></div><div class="transfer-card highlight"><div class="transfer-method">HHCA</div><div class="transfer-row"><span class="transfer-label">Train Pearson</span><span class="transfer-val best">0.4631</span></div><div class="transfer-row"><span class="transfer-label">Test Pearson</span><span class="transfer-val best">0.4620</span></div><div class="transfer-row"><span class="transfer-label">Train P@K</span><span class="transfer-val best">0.3929</span></div><div class="transfer-row"><span class="transfer-label">Test P@K</span><span class="transfer-val best">0.4086</span></div><div class="transfer-gap gap-good">Gap: 0.0011</div></div></div></div></section>
  <section id="scalability"><div class="chart-card"><div class="chart-header"><div><div class="chart-title">Scalability Comparison</div><div class="chart-desc">Computational overhead per action across methods</div></div></div><div class="table-wrapper"><table class="data-table"><thead><tr><th>Method</th><th>Mean Time (ms)</th><th>Std Dev (ms)</th><th>Total Time (ms)</th><th>Overhead Ratio</th><th>Relative Cost</th></tr></thead><tbody><tr><td>Outcome-Only</td><td>0.0026</td><td>0.0015</td><td>0.128</td><td>1.0x</td><td><span class="overhead-bar" style="width:4px"></span> Baseline</td></tr><tr><td>Attention-Rollout</td><td>0.1182</td><td>0.0469</td><td>5.910</td><td>45.5x</td><td><span class="overhead-bar" style="width:24px"></span> Low</td></tr><tr class="row-highlight"><td>HHCA</td><td>5.1032</td><td>34.6112</td><td>255.160</td><td>1962.8x</td><td><span class="overhead-bar" style="width:120px"></span> High</td></tr></tbody></table></div></div></section>
  <section id="compare"><div class="chart-card"><div class="chart-header"><div><div class="chart-title">Interactive Method Comparison</div><div class="chart-desc">Select a method to inspect its full performance profile</div></div></div><div class="comparison-controls"><button class="comp-btn active" data-method="hhca">HHCA</button><button class="comp-btn" data-method="outcome_only">Outcome-Only</button><button class="comp-btn" data-method="attention_rollout">Attention-Rollout</button></div><div class="comparison-result" id="comparisonResult"></div></div></section>
  <section id="methodology"><div class="section-title">Methodology</div><div class="section-subtitle">The HHCA framework operates through a four-stage pipeline</div><div class="methodology-grid"><div class="method-step"><div class="step-number">01</div><div class="step-title">Trajectory Collection</div><div class="step-desc">Generate 200 agentic reasoning trajectories across multi-step tasks with 10-100 action horizons. Each trajectory records token-level, tool-call, skill-selection, and memory operations with ground-truth credit annotations.</div></div><div class="method-step"><div class="step-number">02</div><div class="step-title">Hierarchical Decomposition</div><div class="step-desc">Decompose each trajectory into three levels: macro-level (skill selection), meso-level (tool calls and memory ops), and micro-level (token generation). Credit flows top-down through the hierarchy via hindsight analysis.</div></div><div class="method-step"><div class="step-number">03</div><div class="step-title">Hindsight Credit Propagation</div><div class="step-desc">After observing outcomes, propagate credit backwards through the hierarchy. Each level receives credit proportional to its counterfactual contribution, using temporal difference decomposition within levels.</div></div><div class="method-step"><div class="step-number">04</div><div class="step-title">Evaluation and Transfer</div><div class="step-desc">Evaluate credit accuracy via Pearson/Spearman correlation against ground truth. Test horizon robustness, action-type sensitivity, cross-task transfer, and computational scalability across all methods.</div></div></div></section>
</div>
<footer class="footer"><div class="container"><div class="footer-title">HHCA: Hierarchical Hindsight Credit Assignment</div><div class="footer-text">Research dashboard for the credit assignment in long-horizon agentic reasoning problem. Part of a curated collection of open scientific problems targeting .</div><div class="footer-links"><a href="#">ArXiv Preprint</a><a href="#">Source Code</a><a href="#"></a></div></div></footer>
<script>
(function(){
  var ca={outcome_only:{pearson_correlation:0.2526,spearman_correlation:0.1036,precision_at_k:0.2404,recall_at_k:0.2404},attention_rollout:{pearson_correlation:0.1955,spearman_correlation:0.1326,precision_at_k:0.2392,recall_at_k:0.2392},hhca:{pearson_correlation:0.4507,spearman_correlation:0.5588,precision_at_k:0.3951,recall_at_k:0.3951}};
  var ha={outcome_only:[{h:"10-25",p:0.2553},{h:"26-50",p:0.2486},{h:"51-75",p:0.2394},{h:"76-100",p:0.2651}],attention_rollout:[{h:"10-25",p:0.267},{h:"26-50",p:0.2139},{h:"51-75",p:0.1693},{h:"76-100",p:0.2097}],hhca:[{h:"10-25",p:0.4426},{h:"26-50",p:0.4551},{h:"51-75",p:0.4579},{h:"76-100",p:0.4513}]};
  var at={outcome_only:{token:0.2604,tool_call:0.2555,skill_select:0.2844,memory_op:0.2908},attention_rollout:{token:0.1309,tool_call:0.1544,skill_select:0.1357,memory_op:0.1215},hhca:{token:0.3925,tool_call:0.4398,skill_select:0.4462,memory_op:0.3761}};
  var ct={outcome_only:{train_pearson:0.2561,test_pearson:0.2463,transfer_gap:0.0098},attention_rollout:{train_pearson:0.1856,test_pearson:0.2029,transfer_gap:-0.0173},hhca:{train_pearson:0.4631,test_pearson:0.462,transfer_gap:0.0011}};
  var sc={outcome_only:{mean_time_ms:0.0026,overhead_ratio:1},attention_rollout:{mean_time_ms:0.1182,overhead_ratio:45.4615},hhca:{mean_time_ms:5.1032,overhead_ratio:1962.7692}};
  Chart.defaults.font.family="DM Sans, sans-serif";Chart.defaults.color="#B8A4D6";Chart.defaults.borderColor="rgba(123,47,190,0.15)";
  var C={hhca:{bg:"rgba(45,225,252,0.75)",b:"#2DE1FC"},outcome_only:{bg:"rgba(123,47,190,0.65)",b:"#7B2FBE"},attention_rollout:{bg:"rgba(255,97,210,0.65)",b:"#FF61D2"}};
  var gc="rgba(123,47,190,0.12)";
  var tt={backgroundColor:"rgba(13,2,33,0.95)",borderColor:"rgba(123,47,190,0.4)",borderWidth:1,padding:12,cornerRadius:8};
  var lg={position:"top",labels:{padding:20,usePointStyle:true,pointStyle:"rectRounded",font:{size:12,weight:"500"}}};
  function ds(l,d,k){return{label:l,data:d,backgroundColor:C[k].bg,borderColor:C[k].b,borderWidth:1.5,borderRadius:6,borderSkipped:false};}
  var caK=["pearson_correlation","spearman_correlation","precision_at_k","recall_at_k"];
  new Chart(document.getElementById("creditAccuracyChart"),{type:"bar",data:{labels:["Pearson","Spearman","Precision@K","Recall@K"],datasets:[ds("HHCA",caK.map(function(k){return ca.hhca[k];}),"hhca"),ds("Outcome-Only",caK.map(function(k){return ca.outcome_only[k];}),"outcome_only"),ds("Attention-Rollout",caK.map(function(k){return ca.attention_rollout[k];}),"attention_rollout")]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:lg,tooltip:{backgroundColor:tt.backgroundColor,borderColor:tt.borderColor,borderWidth:1,padding:12,cornerRadius:8,callbacks:{label:function(c){return c.dataset.label+": "+c.parsed.y.toFixed(4);}}}},scales:{y:{beginAtZero:true,max:0.7,grid:{color:gc}},x:{grid:{display:false}}}}});
  new Chart(document.getElementById("horizonChart"),{type:"bar",data:{labels:["10-25","26-50","51-75","76-100"],datasets:[ds("HHCA",ha.hhca.map(function(d){return d.p;}),"hhca"),ds("Outcome-Only",ha.outcome_only.map(function(d){return d.p;}),"outcome_only"),ds("Attention-Rollout",ha.attention_rollout.map(function(d){return d.p;}),"attention_rollout")]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:lg,tooltip:{backgroundColor:tt.backgroundColor,borderColor:tt.borderColor,borderWidth:1,padding:12,cornerRadius:8,callbacks:{label:function(c){return c.dataset.label+": "+c.parsed.y.toFixed(4);}}}},scales:{y:{beginAtZero:true,max:0.55,title:{display:true,text:"Pearson Correlation"},grid:{color:gc}},x:{title:{display:true,text:"Horizon Bin (steps)"},grid:{display:false}}}}});
  var atK=["token","tool_call","skill_select","memory_op"];
  new Chart(document.getElementById("actionTypeChart"),{type:"bar",data:{labels:["Token","Tool Call","Skill Select","Memory Op"],datasets:[ds("HHCA",atK.map(function(k){return at.hhca[k];}),"hhca"),ds("Outcome-Only",atK.map(function(k){return at.outcome_only[k];}),"outcome_only"),ds("Attention-Rollout",atK.map(function(k){return at.attention_rollout[k];}),"attention_rollout")]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:lg,tooltip:{backgroundColor:tt.backgroundColor,borderColor:tt.borderColor,borderWidth:1,padding:12,cornerRadius:8,callbacks:{label:function(c){return c.dataset.label+": r="+c.parsed.y.toFixed(4);}}}},scales:{y:{beginAtZero:true,max:0.55,title:{display:true,text:"Pearson Correlation"},grid:{color:gc}},x:{grid:{display:false}}}}});
  var mm={hhca:{color:"#2DE1FC"},outcome_only:{color:"#7B2FBE"},attention_rollout:{color:"#FF61D2"}};
  function selectMethod(method){
    document.querySelectorAll(".comp-btn").forEach(function(btn){if(btn.dataset.method===method){btn.classList.add("active");}else{btn.classList.remove("active");}});
    var d=ca[method],t=ct[method],s=sc[method],mc=mm[method].color;
    var metrics=[{label:"Pearson r",value:d.pearson_correlation,max:0.6},{label:"Spearman rho",value:d.spearman_correlation,max:0.7},{label:"Precision@K",value:d.precision_at_k,max:0.5},{label:"Recall@K",value:d.recall_at_k,max:0.5},{label:"Transfer Gap",value:t.transfer_gap,max:0.02},{label:"Mean Time (ms)",value:s.mean_time_ms,max:6},{label:"Overhead",value:s.overhead_ratio,max:2000,isR:true}];
    var container=document.getElementById("comparisonResult");
    while(container.firstChild)container.removeChild(container.firstChild);
    metrics.forEach(function(m){
      var pct=Math.min(100,(Math.abs(m.value)/m.max)*100);
      var disp=m.isR?m.value.toFixed(1)+"x":m.value.toFixed(4);
      var card=document.createElement("div");card.className="comp-metric";
      var lbl=document.createElement("div");lbl.className="comp-metric-label";lbl.textContent=m.label;
      var val=document.createElement("div");val.className="comp-metric-value";val.style.color=mc;val.textContent=disp;
      var bo=document.createElement("div");bo.className="comp-metric-bar";
      var bf=document.createElement("div");bf.className="comp-metric-fill";bf.style.width=pct+"%";bf.style.background="linear-gradient(90deg, "+mc+"88, "+mc+")";
      bo.appendChild(bf);card.appendChild(lbl);card.appendChild(val);card.appendChild(bo);container.appendChild(card);
    });
  }
  document.querySelectorAll(".comp-btn").forEach(function(btn){btn.addEventListener("click",function(){selectMethod(this.dataset.method);});});
  selectMethod("hhca");
})();
</script>
</body>
</html>