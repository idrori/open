<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shape Variability in Rotation-Invariant Descriptors</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
<style>
:root { --primary: #1a3a5c; --accent: #2980b9; --bg: #f5f7fa; --card: #ffffff; --text: #2c3e50; --border: #dce1e8; }
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg); color: var(--text); }
header { background: var(--primary); color: white; padding: 2rem; text-align: center; }
header h1 { font-size: 1.5rem; margin-bottom: 0.5rem; }
header p { opacity: 0.85; font-size: 0.9rem; max-width: 700px; margin: 0 auto; }
.container { max-width: 1200px; margin: 0 auto; padding: 1.5rem; }
.grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(520px, 1fr)); gap: 1.5rem; margin-bottom: 1.5rem; }
.card { background: var(--card); border-radius: 10px; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08); border: 1px solid var(--border); }
.card h2 { color: var(--primary); font-size: 1.1rem; margin-bottom: 1rem; border-bottom: 2px solid var(--accent); padding-bottom: 0.5rem; }
.chart-container { position: relative; height: 320px; }
.metric-row { display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap; }
.metric { flex: 1; min-width: 140px; background: var(--bg); border-radius: 8px; padding: 1rem; text-align: center; }
.metric .value { font-size: 1.6rem; font-weight: 700; color: var(--accent); }
.metric .label { font-size: 0.8rem; color: #666; margin-top: 0.3rem; }
table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
th, td { padding: 0.5rem; text-align: center; border-bottom: 1px solid var(--border); }
th { background: var(--primary); color: white; }
footer { text-align: center; padding: 1.5rem; color: #999; font-size: 0.8rem; }
</style>
</head>
<body>
<header>
<h1>Shape Variability in Rotation-Invariant Descriptors</h1>
<p>Distributional descriptors for comparing flexible molecular shapes using tensor moment invariant ensembles.</p>
</header>
<div class="container">
<div class="metric-row" id="metrics"></div>
<div class="grid">
<div class="card">
<h2>Method Comparison</h2>
<div class="chart-container"><canvas id="compChart"></canvas></div>
</div>
<div class="card">
<h2>Precision vs Variability Level</h2>
<div class="chart-container"><canvas id="varChart"></canvas></div>
</div>
<div class="card">
<h2>Retrieval vs Binding Match</h2>
<div class="chart-container"><canvas id="bindChart"></canvas></div>
</div>
<div class="card">
<h2>Computation Time</h2>
<div class="chart-container"><canvas id="timeChart"></canvas></div>
</div>
</div>
<div class="card">
<h2>Results Summary</h2>
<table>
<thead><tr><th>Method</th><th>Precision</th><th>Binding Score</th><th>Rot. Invariance</th><th>Var. Capture</th><th>Time (ms)</th></tr></thead>
<tbody id="tableBody"></tbody>
</table>
</div>
</div>
<footer>Shape Variability in Rotation-Invariant Descriptors - Distributional Embeddings Study</footer>
<script>
var COLORS = ['#1a3a5c','#2980b9','#e74c3c','#27ae60'];
var summary = {
  "kernel_mmd": {"avg_precision":1.0,"avg_binding_score":0.14,"avg_rotation_invariance":0.9999,"avg_variability_capture":1.0,"avg_time_ms":2386},
  "mean_cov": {"avg_precision":1.0,"avg_binding_score":0.079,"avg_rotation_invariance":0.9999,"avg_variability_capture":1.0,"avg_time_ms":2290},
  "mean_only": {"avg_precision":1.0,"avg_binding_score":0.079,"avg_rotation_invariance":0.9999,"avg_variability_capture":1.0,"avg_time_ms":1128},
  "wasserstein": {"avg_precision":1.0,"avg_binding_score":0.316,"avg_rotation_invariance":0.9999,"avg_variability_capture":1.0,"avg_time_ms":2339}
};
var varEffect = {
  "kernel_mmd": {"0.05":1.0,"0.1":1.0,"0.2":1.0,"0.5":1.0},
  "mean_cov": {"0.05":1.0,"0.1":1.0,"0.2":1.0,"0.5":1.0},
  "mean_only": {"0.05":1.0,"0.1":1.0,"0.2":1.0,"0.5":1.0},
  "wasserstein": {"0.05":1.0,"0.1":1.0,"0.2":1.0,"0.5":1.0}
};
var methods = Object.keys(summary);

var metricsDiv = document.getElementById('metrics');
var items = [
  {v:'100%',l:'Retrieval Precision (All Methods)'},
  {v:'0.316',l:'Best Binding Score (Wasserstein)'},
  {v:'99.99%',l:'Rotation Invariance'},
  {v:'4',l:'Methods Compared'}
];
items.forEach(function(m){
  var d=document.createElement('div'); d.className='metric';
  var vd=document.createElement('div'); vd.className='value'; vd.textContent=m.v;
  var ld=document.createElement('div'); ld.className='label'; ld.textContent=m.l;
  d.appendChild(vd); d.appendChild(ld); metricsDiv.appendChild(d);
});

var tbody = document.getElementById('tableBody');
methods.forEach(function(m){
  var tr=document.createElement('tr'); var s=summary[m];
  [m.replace(/_/g,' '),s.avg_precision.toFixed(3),s.avg_binding_score.toFixed(3),s.avg_rotation_invariance.toFixed(4),s.avg_variability_capture.toFixed(3),s.avg_time_ms.toFixed(0)].forEach(function(c){
    var td=document.createElement('td'); td.textContent=c; tr.appendChild(td);
  }); tbody.appendChild(tr);
});

// Comparison chart
new Chart(document.getElementById('compChart').getContext('2d'), {
  type:'bar',
  data:{
    labels:methods.map(function(m){return m.replace(/_/g,' ');}),
    datasets:[
      {label:'Precision',data:methods.map(function(m){return summary[m].avg_precision;}),backgroundColor:'#1a3a5c'},
      {label:'Binding Score',data:methods.map(function(m){return summary[m].avg_binding_score;}),backgroundColor:'#2980b9'},
      {label:'Var. Capture',data:methods.map(function(m){return summary[m].avg_variability_capture;}),backgroundColor:'#27ae60'}
    ]
  },
  options:{responsive:true,maintainAspectRatio:false,scales:{y:{min:0,max:1.1}}}
});

// Variability effect
var varLevels = ['0.05','0.1','0.2','0.5'];
new Chart(document.getElementById('varChart').getContext('2d'), {
  type:'line',
  data:{
    labels:varLevels.map(function(v){return 'var='+v;}),
    datasets:methods.map(function(m,i){
      return {label:m.replace(/_/g,' '),data:varLevels.map(function(v){return varEffect[m][v];}),borderColor:COLORS[i%4],tension:0.3,pointRadius:5};
    })
  },
  options:{responsive:true,maintainAspectRatio:false,scales:{y:{min:0.8,max:1.05,title:{display:true,text:'Precision'}}}}
});

// Binding
new Chart(document.getElementById('bindChart').getContext('2d'), {
  type:'bar',
  data:{
    labels:methods.map(function(m){return m.replace(/_/g,' ');}),
    datasets:[
      {label:'Retrieval Precision',data:methods.map(function(m){return summary[m].avg_precision;}),backgroundColor:'#1a3a5c'},
      {label:'Binding Match',data:methods.map(function(m){return summary[m].avg_binding_score;}),backgroundColor:'#e74c3c'}
    ]
  },
  options:{responsive:true,maintainAspectRatio:false,scales:{y:{min:0,max:1.1}}}
});

// Time
new Chart(document.getElementById('timeChart').getContext('2d'), {
  type:'bar',
  data:{
    labels:methods.map(function(m){return m.replace(/_/g,' ');}),
    datasets:[{label:'Time (ms)',data:methods.map(function(m){return summary[m].avg_time_ms;}),backgroundColor:COLORS}]
  },
  options:{responsive:true,maintainAspectRatio:false,scales:{y:{title:{display:true,text:'ms'}}}}
});
</script>
</body>
</html>
