<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hierarchical Physics-Constrained Learning for Geometry at Scale</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',system-ui,-apple-system,sans-serif;background:#0f172a;color:#e2e8f0;line-height:1.6}
.container{max-width:1400px;margin:0 auto;padding:20px}
header{text-align:center;padding:40px 20px;border-bottom:1px solid #1e293b;margin-bottom:30px}
h1{font-size:1.8rem;color:#f1f5f9;margin-bottom:10px}
h2{font-size:1.3rem;color:#94a3b8;margin-bottom:20px;padding-bottom:10px;border-bottom:1px solid #1e293b}
h3{font-size:1.1rem;color:#cbd5e1;margin-bottom:12px}
.subtitle{color:#64748b;font-size:1rem;max-width:900px;margin:0 auto}
.badge{display:inline-block;padding:4px 12px;border-radius:20px;font-size:0.75rem;font-weight:600;margin:4px}
.badge-cv{background:#059669;color:#ecfdf5}
.grid{display:grid;gap:24px;margin-bottom:30px}
.grid-2{grid-template-columns:repeat(auto-fit,minmax(500px,1fr))}
.grid-3{grid-template-columns:repeat(auto-fit,minmax(350px,1fr))}
.grid-4{grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
.card{background:#1e293b;border-radius:12px;padding:24px;border:1px solid #334155}
.stat-card{text-align:center;padding:20px}
.stat-value{font-size:2.2rem;font-weight:700;color:#f59e0b}
.stat-label{font-size:0.85rem;color:#94a3b8;margin-top:4px}
.stat-delta{font-size:0.8rem;margin-top:2px;color:#4ade80}
.chart-container{position:relative;height:380px;width:100%}
.chart-sm{height:300px}
table{width:100%;border-collapse:collapse;font-size:0.85rem}
th,td{padding:10px 12px;text-align:left;border-bottom:1px solid #334155}
th{color:#94a3b8;font-weight:600;background:#0f172a}
td{color:#cbd5e1}
.problem-box{background:linear-gradient(135deg,#451a03,#78350f);border:1px solid #d97706;border-radius:12px;padding:24px;margin-bottom:30px}
.problem-box p{color:#fde68a}
.tier{display:flex;align-items:flex-start;gap:16px;margin-bottom:16px;padding:16px;background:#1e293b;border-radius:8px;border-left:4px solid}
.tier-1{border-left-color:#38bdf8}
.tier-2{border-left-color:#a78bfa}
.tier-3{border-left-color:#f59e0b}
.tier h4{color:#f1f5f9;margin-bottom:4px}
.tier p{color:#94a3b8;font-size:0.9rem}
.tier-label{min-width:60px;padding:6px 12px;border-radius:6px;font-size:0.75rem;font-weight:700;text-align:center;color:#fff}
.good{color:#4ade80;font-weight:600}
@media(max-width:768px){.grid-2,.grid-3,.grid-4{grid-template-columns:1fr}h1{font-size:1.4rem}.chart-container{height:300px}}
</style>
</head>
<body>
<div class="container">
<header>
<div><span class="badge badge-cv">CV</span></div>
<h1>Hierarchical Physics-Constrained Learning for Physically Consistent Geometry at Scale</h1>
<p class="subtitle">Bridging classical geometric consistency with learned robustness through differentiable pose graph optimization and chunked attention</p>
</header>

<div class="problem-box">
<h3>Open Problem</h3>
<p>Learning physically consistent geometry at scale remains a challenging open problem (Xu et al., GPA-VGGT 2026). Without structured constraints, learned predictions suffer from scale drift, inconsistent geometry across viewpoints, and violation of physical laws. This work resolves the tension by making classical constraints differentiable and embedding them as hierarchical losses within a learning framework.</p>
</div>

<div class="grid grid-4">
<div class="card stat-card"><div class="stat-value">40.0%</div><div class="stat-label">Translation Error Reduction</div><div class="stat-delta">Full model vs Baseline</div></div>
<div class="card stat-card"><div class="stat-value">14.4x</div><div class="stat-label">Scale Drift Reduction</div><div class="stat-delta">Hierarchical anchoring</div></div>
<div class="card stat-card"><div class="stat-value">47.1x</div><div class="stat-label">Computational Speedup</div><div class="stat-delta">Chunked vs Global at N=1000</div></div>
<div class="card stat-card"><div class="stat-value">~60%</div><div class="stat-label">Gravity Misalignment Reduction</div><div class="stat-delta">Self-supervised enforcement</div></div>
</div>

<div style="margin-bottom:30px">
<h2 style="color:#94a3b8;margin-bottom:16px;padding-bottom:10px;border-bottom:1px solid #1e293b">Three-Tier Hierarchical Framework</h2>
<div class="tier tier-1">
<div><span class="tier-label" style="background:#0891b2">Tier 1</span></div>
<div><h4>Local: Epipolar Consistency</h4><p>Symmetric Sampson distance between frame pairs ensures predicted depth and pose are mutually consistent. Largest single contribution: removing it causes +29.0% translation error increase.</p></div>
</div>
<div class="tier tier-2">
<div><span class="tier-label" style="background:#7c3aed">Tier 2</span></div>
<div><h4>Window: SE(3) Composition Closure + Scale Consistency</h4><p>Penalizes deviation from identity for pose cycles and enforces depth scale agreement across overlapping windows via log-ratio loss.</p></div>
</div>
<div class="tier tier-3">
<div><span class="tier-label" style="background:#d97706">Tier 3</span></div>
<div><h4>Global: Gravity Alignment + Ground Plane</h4><p>Self-supervised enforcement of consistent gravity direction and coplanar ground points. Reduces gravity misalignment by ~60% without ground-truth gravity.</p></div>
</div>
</div>

<div class="grid grid-2">
<div class="card">
<h2>Pose Graph Optimization: Translation Error</h2>
<div class="chart-container"><canvas id="poseTransChart"></canvas></div>
</div>
<div class="card">
<h2>Pose Graph Optimization: Rotation Error</h2>
<div class="chart-container"><canvas id="poseRotChart"></canvas></div>
</div>
</div>

<div class="grid grid-2">
<div class="card">
<h2>Scale Drift Analysis</h2>
<div class="chart-container"><canvas id="scaleChart"></canvas></div>
</div>
<div class="card">
<h2>Loss Component Ablation</h2>
<div class="chart-container"><canvas id="ablationChart"></canvas></div>
</div>
</div>

<div class="grid grid-2">
<div class="card">
<h2>Scalability: Chunked vs Global Attention</h2>
<div class="chart-container"><canvas id="scalabilityChart"></canvas></div>
</div>
<div class="card">
<h2>Gravity Coherence</h2>
<div class="chart-container"><canvas id="gravityChart"></canvas></div>
</div>
</div>

<div class="card" style="margin-bottom:30px">
<h2>Window Configuration Analysis</h2>
<div class="chart-container chart-sm"><canvas id="windowChart"></canvas></div>
</div>

<div class="grid grid-2" style="margin-bottom:30px">
<div class="card">
<h2>Pose Graph Results</h2>
<table>
<thead><tr><th>Noise</th><th colspan="2">No Optimization</th><th colspan="2">Seq. Only</th><th colspan="2">With Loops</th></tr>
<tr><th></th><th>Trans(m)</th><th>Rot(deg)</th><th>Trans</th><th>Rot</th><th>Trans</th><th>Rot</th></tr></thead>
<tbody>
<tr><td>0.01</td><td>0.40</td><td>1.41</td><td>0.40</td><td>1.41</td><td class="good">0.34</td><td class="good">1.18</td></tr>
<tr><td>0.05</td><td>1.09</td><td>6.80</td><td>1.09</td><td>6.80</td><td class="good">0.94</td><td class="good">6.27</td></tr>
<tr><td>0.10</td><td>1.52</td><td>17.68</td><td>1.52</td><td>17.68</td><td class="good">1.32</td><td class="good">14.02</td></tr>
<tr><td>0.20</td><td>4.19</td><td>47.38</td><td>4.19</td><td>47.38</td><td class="good">3.34</td><td class="good">40.64</td></tr>
<tr><td>0.30</td><td>4.62</td><td>37.67</td><td>4.62</td><td>37.67</td><td class="good">4.21</td><td class="good">30.63</td></tr>
</tbody>
</table>
</div>
<div class="card">
<h2>Loss Ablation Results</h2>
<table>
<thead><tr><th>Config</th><th>Trans(m)</th><th>Rot(deg)</th><th>Scale CV</th><th>Grav</th></tr></thead>
<tbody>
<tr><td style="color:#4ade80;font-weight:700">Full (Ours)</td><td class="good">0.359</td><td class="good">3.46</td><td class="good">7.8e-5</td><td class="good">0.972</td></tr>
<tr><td>No Epipolar</td><td>0.463</td><td>3.93</td><td>10.0e-5</td><td>0.971</td></tr>
<tr><td>No Composition</td><td>0.411</td><td>3.70</td><td>8.9e-5</td><td>0.971</td></tr>
<tr><td>No Gravity</td><td>0.379</td><td>3.56</td><td>8.3e-5</td><td>0.971</td></tr>
<tr><td>No Scale</td><td>0.411</td><td>3.70</td><td>8.9e-5</td><td>0.971</td></tr>
<tr><td>No Ground</td><td>0.369</td><td>3.51</td><td>8.1e-5</td><td>0.972</td></tr>
<tr><td style="color:#94a3b8">Baseline</td><td>0.598</td><td>4.46</td><td>12.6e-5</td><td>0.970</td></tr>
</tbody>
</table>
</div>
</div>
</div>

<script>
Chart.defaults.color = '#94a3b8';
Chart.defaults.borderColor = '#334155';

const noiseLevels = ['0.01','0.05','0.10','0.20','0.30'];
const noOpt = {trans:[0.396,1.086,1.516,4.189,4.617],rot:[1.41,6.80,17.68,47.38,37.67]};
const seqOnly = {trans:[0.396,1.086,1.516,4.189,4.617],rot:[1.41,6.80,17.68,47.38,37.67]};
const withLoops = {trans:[0.341,0.937,1.316,3.336,4.215],rot:[1.18,6.27,14.02,40.64,30.63]};

new Chart(document.getElementById('poseTransChart'),{
  type:'line',
  data:{labels:noiseLevels,datasets:[
    {label:'No Optimization',data:noOpt.trans,borderColor:'#94a3b8',backgroundColor:'#94a3b833',borderWidth:2,pointRadius:5,tension:0.3},
    {label:'Sequential Only',data:seqOnly.trans,borderColor:'#f59e0b',backgroundColor:'#f59e0b33',borderWidth:2,pointRadius:5,tension:0.3,borderDash:[5,5]},
    {label:'With Loop Closure',data:withLoops.trans,borderColor:'#4ade80',backgroundColor:'#4ade8033',borderWidth:2,pointRadius:5,tension:0.3}
  ]},
  options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'}},scales:{x:{title:{display:true,text:'Noise Level (sigma)'}},y:{title:{display:true,text:'Translation Error (m)'}}}}
});

new Chart(document.getElementById('poseRotChart'),{
  type:'line',
  data:{labels:noiseLevels,datasets:[
    {label:'No Optimization',data:noOpt.rot,borderColor:'#94a3b8',borderWidth:2,pointRadius:5,tension:0.3},
    {label:'Sequential Only',data:seqOnly.rot,borderColor:'#f59e0b',borderWidth:2,pointRadius:5,tension:0.3,borderDash:[5,5]},
    {label:'With Loop Closure',data:withLoops.rot,borderColor:'#4ade80',borderWidth:2,pointRadius:5,tension:0.3}
  ]},
  options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'}},scales:{x:{title:{display:true,text:'Noise Level (sigma)'}},y:{title:{display:true,text:'Rotation Error (degrees)'}}}}
});

// Scale Drift
const driftRates = ['0.000','0.001','0.003','0.005'];
const uncorrCV = [0.0000,0.0274,0.0755,0.1165];
const corrCV = [0.0000,0.0020,0.0053,0.0081];

new Chart(document.getElementById('scaleChart'),{
  type:'bar',
  data:{labels:driftRates,datasets:[
    {label:'Uncorrected',data:uncorrCV,backgroundColor:'#ef4444cc',borderColor:'#ef4444',borderWidth:1},
    {label:'With Scale Anchoring',data:corrCV,backgroundColor:'#4ade80cc',borderColor:'#4ade80',borderWidth:1}
  ]},
  options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'},title:{display:true,text:'Scale Coefficient of Variation (lower = better)'}},
    scales:{x:{title:{display:true,text:'Per-Frame Drift Rate'}},y:{title:{display:true,text:'Scale CV'}}}}
});

// Ablation
const ablationConfigs = ['Full\n(Ours)','No\nEpipolar','No\nComposition','No\nGravity','No\nScale','No\nGround','Baseline'];
const ablationTrans = [0.359,0.463,0.411,0.379,0.411,0.369,0.598];
const ablationColors = ['#4ade80','#ef4444','#f59e0b','#38bdf8','#a78bfa','#f472b6','#64748b'];

new Chart(document.getElementById('ablationChart'),{
  type:'bar',
  data:{labels:ablationConfigs,datasets:[{
    label:'Translation Error (m)',data:ablationTrans,
    backgroundColor:ablationColors.map(c=>c+'cc'),borderColor:ablationColors,borderWidth:2
  }]},
  options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false},title:{display:true,text:'Translation Error by Configuration (lower = better)'}},
    scales:{y:{beginAtZero:true,max:0.7,title:{display:true,text:'Translation Error (m)'}}}}
});

// Scalability
const seqLengths = [10,20,50,100,200,500,1000];
const globalOps = [100,400,2500,10000,40000,250000,1000000];
const chunkedOps = [256,512,1024,2048,4352,10752,21248];
const speedups = [0.39,0.78,2.44,4.88,9.19,23.25,47.06];

new Chart(document.getElementById('scalabilityChart'),{
  type:'line',
  data:{labels:seqLengths.map(String),datasets:[
    {label:'Global O(N^2)',data:globalOps,borderColor:'#ef4444',borderWidth:2,pointRadius:5,tension:0.2,yAxisID:'y'},
    {label:'Chunked O(NK)',data:chunkedOps,borderColor:'#4ade80',borderWidth:2,pointRadius:5,tension:0.2,yAxisID:'y'},
    {label:'Speedup Factor',data:speedups,borderColor:'#f59e0b',borderWidth:2,pointRadius:5,tension:0.2,borderDash:[6,3],yAxisID:'y2'}
  ]},
  options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'}},
    scales:{x:{title:{display:true,text:'Sequence Length (frames)'}},
      y:{type:'logarithmic',position:'left',title:{display:true,text:'Operations (log scale)'}},
      y2:{type:'linear',position:'right',title:{display:true,text:'Speedup Factor'},grid:{drawOnChartArea:false}}}}
});

// Gravity
const gravNoise = ['0.02','0.05','0.10','0.20'];
const gravUncorr = [0.00143,0.00195,0.01362,0.01431];
const gravCorr = [0.00057,0.00078,0.00553,0.00575];

new Chart(document.getElementById('gravityChart'),{
  type:'bar',
  data:{labels:gravNoise,datasets:[
    {label:'Without Gravity Loss',data:gravUncorr,backgroundColor:'#ef4444cc',borderColor:'#ef4444',borderWidth:1},
    {label:'With Gravity Loss',data:gravCorr,backgroundColor:'#4ade80cc',borderColor:'#4ade80',borderWidth:1}
  ]},
  options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'},title:{display:true,text:'Gravity Misalignment (lower = better), ~60% reduction'}},
    scales:{x:{title:{display:true,text:'Noise Level'}},y:{title:{display:true,text:'Misalignment'}}}}
});

// Window Configuration
const windowConfigs = ['W8_O2','W8_O4','W16_O2','W16_O4','W16_O8','W32_O4','W32_O8','W32_O16'];
const windowConsistency = [0.00578,0.00604,0.00735,0.00588,0.00608,0.00755,0.00714,0.00619];
const windowComplexity = [104,152,96,112,144,96,96,128];

new Chart(document.getElementById('windowChart'),{
  type:'scatter',
  data:{datasets:[{
    label:'Window Configs',
    data:windowConfigs.map((c,i)=>({x:windowComplexity[i],y:windowConsistency[i],label:c})),
    backgroundColor:'#f59e0bcc',borderColor:'#f59e0b',pointRadius:8,pointHoverRadius:12
  },{
    label:'Global (N^2=6400)',
    data:[{x:6400,y:0}],
    backgroundColor:'#ef444499',borderColor:'#ef4444',pointRadius:10,pointStyle:'triangle'
  }]},
  options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'},tooltip:{callbacks:{label:function(ctx){
    const cfg = windowConfigs[ctx.dataIndex];
    return cfg?`${cfg}: complexity=${ctx.parsed.x}, consistency=${ctx.parsed.y.toFixed(4)}`:`Global: ${ctx.parsed.x}`;
  }}}},
    scales:{x:{title:{display:true,text:'Computational Complexity (operations)'},type:'logarithmic'},
      y:{title:{display:true,text:'Overlap Consistency Error'},beginAtZero:true}}}
});
</script>
</body>
</html>
